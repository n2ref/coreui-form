!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):((e="undefined"!=typeof globalThis?globalThis:e||self).CoreUI=e.CoreUI||{},e.CoreUI.form=t())}(this,function(){"use strict";function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,o(i.key),i)}}function e(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t,n){(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function t(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function n(e,t){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");t=e;if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(i)return(i=Object.getOwnPropertyDescriptor(i,t)).get?i.get.call(arguments.length<3?e:n):i.value}).apply(this,arguments)}function o(e){e=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!=typeof(n=n.call(e,t||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).ejs=e()}(function(){return function i(o,r,s){function a(t,e){if(!r[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}n=r[t]={exports:{}},o[t][0].call(n.exports,function(e){return a(o[t][1][e]||e)},n,n.exports,i,o,r,s)}return r[t].exports}for(var l="function"==typeof require&&require,e=0;e<s.length;e++)a(s[e]);return a}({1:[function(e,t,l){var r=e("fs"),c=e("path"),d=e("./utils"),n=!1,e=e("../package.json").version,i=["delimiter","scope","context","debug","compileDebug","client","_with","rmWhitespace","strict","filename","async"],u=i.concat("cache"),s=/^\uFEFF/,h=/^[a-zA-Z_$][0-9a-zA-Z_$]*$/;function a(t,e){var n;if(e.some(function(e){return n=l.resolveInclude(t,e,!0),r.existsSync(n)}))return n}function f(e,t){var n,i=e.filename,o=1<arguments.length;if(e.cache){if(!i)throw new Error("cache option requires a filename");if(n=l.cache.get(i))return n;o||(t=p(i).toString().replace(s,""))}else if(!o){if(!i)throw new Error("Internal EJS error: no file name or template provided");t=p(i).toString().replace(s,"")}return n=l.compile(t,e),e.cache&&l.cache.set(i,n),n}function p(e){return l.fileLoader(e)}function m(e,t){var n=d.shallowCopy(d.createNullProtoObjWherePossible(),t);if(n.filename=function(e,t){var n,i=t.views,o=/^[A-Za-z]+:\\|^\//.exec(e);if(o&&o.length)e=e.replace(/^\/*/,""),n=Array.isArray(t.root)?a(e,t.root):l.resolveInclude(e,t.root||"/",!0);else if(!(n=!(n=t.filename&&(o=l.resolveInclude(e,t.filename),r.existsSync(o))?o:n)&&Array.isArray(i)?a(e,i):n)&&"function"!=typeof t.includer)throw new Error('Could not find the include file "'+t.escapeFunction(e)+'"');return n}(e,n),"function"==typeof t.includer){t=t.includer(e,n.filename);if(t&&(t.filename&&(n.filename=t.filename),t.template))return f(n,t.template)}return f(n)}function v(e,t,n,i,o){var t=t.split("\n"),r=Math.max(i-3,0),s=Math.min(t.length,i+3),o=o(n),n=t.slice(r,s).map(function(e,t){t=t+r+1;return(t==i?" >> ":"    ")+t+"| "+e}).join("\n");throw e.path=o,e.message=(o||"ejs")+":"+i+"\n"+n+"\n\n"+e.message,e}function _(e){return e.replace(/;(\s*$)/,"$1")}function y(e,t){t=t||d.createNullProtoObjWherePossible();var n=d.createNullProtoObjWherePossible();this.templateText=e,this.mode=null,this.truncate=!1,this.currentLine=1,this.source="",n.client=t.client||!1,n.escapeFunction=t.escape||t.escapeFunction||d.escapeXML,n.compileDebug=!1!==t.compileDebug,n.debug=!!t.debug,n.filename=t.filename,n.openDelimiter=t.openDelimiter||l.openDelimiter||"<",n.closeDelimiter=t.closeDelimiter||l.closeDelimiter||">",n.delimiter=t.delimiter||l.delimiter||"%",n.strict=t.strict||!1,n.context=t.context,n.cache=t.cache||!1,n.rmWhitespace=t.rmWhitespace,n.root=t.root,n.includer=t.includer,n.outputFunctionName=t.outputFunctionName,n.localsName=t.localsName||l.localsName||"locals",n.views=t.views,n.async=t.async,n.destructuredLocals=t.destructuredLocals,n.legacyInclude=void 0===t.legacyInclude||!!t.legacyInclude,n.strict?n._with=!1:n._with=void 0===t._with||t._with,this.opts=n,this.regex=this.createRegex()}l.cache=d.cache,l.fileLoader=r.readFileSync,l.localsName="locals",l.promiseImpl=new Function("return this;")().Promise,l.resolveInclude=function(e,t,n){var i=c.dirname,o=c.extname,n=(0,c.resolve)(n?t:i(t),e);return o(e)||(n+=".ejs"),n},l.compile=function(e,t){return t&&t.scope&&(n||(console.warn("`scope` option is deprecated and will be removed in EJS 3"),n=!0),t.context||(t.context=t.scope),delete t.scope),new y(e,t).compile()},l.render=function(e,t,n){t=t||d.createNullProtoObjWherePossible(),n=n||d.createNullProtoObjWherePossible();return 2==arguments.length&&d.shallowCopyFromList(n,t,i),f(n,e)(t)},l.renderFile=function(){var e,t,n,i=Array.prototype.slice.call(arguments),o=i.shift(),r={filename:o},s=("function"==typeof arguments[arguments.length-1]&&(e=i.pop()),i.length?(t=i.shift(),i.length?d.shallowCopy(r,i.pop()):(t.settings&&(t.settings.views&&(r.views=t.settings.views),t.settings["view cache"]&&(r.cache=!0),i=t.settings["view options"])&&d.shallowCopy(r,i),d.shallowCopyFromList(r,t,u)),r.filename=o):t=d.createNullProtoObjWherePossible(),r),a=t,i=e;if(!i){if("function"==typeof l.promiseImpl)return new l.promiseImpl(function(e,t){try{e(n=f(s)(a))}catch(e){t(e)}});throw new Error("Please provide a callback function")}try{n=f(s)(a)}catch(e){return i(e)}i(null,n)},l.Template=y,l.clearCache=function(){l.cache.reset()},y.modes={EVAL:"eval",ESCAPED:"escaped",RAW:"raw",COMMENT:"comment",LITERAL:"literal"},y.prototype={createRegex:function(){var e="(<%%|%%>|<%=|<%-|<%_|<%#|<%|%>|-%>|_%>)",t=d.escapeRegExpChars(this.opts.delimiter),n=d.escapeRegExpChars(this.opts.openDelimiter),i=d.escapeRegExpChars(this.opts.closeDelimiter),e=e.replace(/%/g,t).replace(/</g,n).replace(/>/g,i);return new RegExp(e)},compile:function(){var e,o=this.opts,t="",n="",r=o.escapeFunction,i=o.filename?JSON.stringify(o.filename):"undefined";if(!this.source){if(this.generateSource(),t+='  var __output = "";\n  function __append(s) { if (s !== undefined && s !== null) __output += s }\n',o.outputFunctionName){if(!h.test(o.outputFunctionName))throw new Error("outputFunctionName is not a valid JS identifier.");t+="  var "+o.outputFunctionName+" = __append;\n"}if(o.localsName&&!h.test(o.localsName))throw new Error("localsName is not a valid JS identifier.");if(o.destructuredLocals&&o.destructuredLocals.length){for(var s="  var __locals = ("+o.localsName+" || {}),\n",a=0;a<o.destructuredLocals.length;a++){var l=o.destructuredLocals[a];if(!h.test(l))throw new Error("destructuredLocals["+a+"] is not a valid JS identifier.");0<a&&(s+=",\n  "),s+=l+" = __locals."+l}t+=s+";\n"}!1!==o._with&&(t+="  with ("+o.localsName+" || {}) {\n",n+="  }\n"),this.source=t+this.source+(n+="  return __output;\n")}t=o.compileDebug?"var __line = 1\n  , __lines = "+JSON.stringify(this.templateText)+"\n  , __filename = "+i+";\ntry {\n"+this.source+"} catch (e) {\n  rethrow(e, __lines, __filename, __line, escapeFn);\n}\n":this.source,o.client&&(t="escapeFn = escapeFn || "+r.toString()+";\n"+t,o.compileDebug)&&(t="rethrow = rethrow || "+v.toString()+";\n"+t),o.strict&&(t='"use strict";\n'+t),o.debug&&console.log(t),o.compileDebug&&o.filename&&(t=t+"\n//# sourceURL="+i+"\n");try{if(o.async)try{u=new Function("return (async function(){}).constructor;")()}catch(e){throw e instanceof SyntaxError?new Error("This environment does not support async/await"):e}else u=Function;e=new u(o.localsName+", escapeFn, include, rethrow",t)}catch(e){throw e instanceof SyntaxError&&(o.filename&&(e.message+=" in "+o.filename),e.message+=" while compiling ejs\n\n",e.message+="If the above error is not helpful, you may want to try EJS-Lint:\n",e.message+="https://github.com/RyanZim/EJS-Lint",o.async||(e.message+="\n",e.message+="Or, if you meant to create an async function, pass `async: true` as an option.")),e}n=o.client?e:function(i){return e.apply(o.context,[i||d.createNullProtoObjWherePossible(),r,function(e,t){var n=d.shallowCopy(d.createNullProtoObjWherePossible(),i);return t&&(n=d.shallowCopy(n,t)),m(e,o)(n)},v])};if(o.filename&&"function"==typeof Object.defineProperty){var i=o.filename,u=c.basename(i,c.extname(i));try{Object.defineProperty(n,"name",{value:u,writable:!1,enumerable:!1,configurable:!0})}catch(e){}}return n},generateSource:function(){this.opts.rmWhitespace&&(this.templateText=this.templateText.replace(/[\r\n]+/g,"\n").replace(/^\s+|\s+$/gm,"")),this.templateText=this.templateText.replace(/[ \t]*<%_/gm,"<%_").replace(/_%>[ \t]*/gm,"_%>");var n=this,i=this.parseTemplateText(),o=this.opts.delimiter,r=this.opts.openDelimiter,s=this.opts.closeDelimiter;i&&i.length&&i.forEach(function(e,t){if(0===e.indexOf(r+o)&&0!==e.indexOf(r+o+o)&&(t=i[t+2])!=o+s&&t!="-"+o+s&&t!="_"+o+s)throw new Error('Could not find matching close tag for "'+e+'".');n.scanLine(e)})},parseTemplateText:function(){for(var e,t=this.templateText,n=this.regex,i=n.exec(t),o=[];i;)0!==(e=i.index)&&(o.push(t.substring(0,e)),t=t.slice(e)),o.push(i[0]),t=t.slice(i[0].length),i=n.exec(t);return t&&o.push(t),o},_addOutput:function(e){if(this.truncate&&(e=e.replace(/^(?:\r\n|\r|\n)/,""),this.truncate=!1),!e)return e;e=(e=(e=(e=e.replace(/\\/g,"\\\\")).replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace(/"/g,'\\"'),this.source+='    ; __append("'+e+'")\n'},scanLine:function(e){var t=this.opts.delimiter,n=this.opts.openDelimiter,i=this.opts.closeDelimiter,o=e.split("\n").length-1;switch(e){case n+t:case n+t+"_":this.mode=y.modes.EVAL;break;case n+t+"=":this.mode=y.modes.ESCAPED;break;case n+t+"-":this.mode=y.modes.RAW;break;case n+t+"#":this.mode=y.modes.COMMENT;break;case n+t+t:this.mode=y.modes.LITERAL,this.source+='    ; __append("'+e.replace(n+t+t,n+t)+'")\n';break;case t+t+i:this.mode=y.modes.LITERAL,this.source+='    ; __append("'+e.replace(t+t+i,t+i)+'")\n';break;case t+i:case"-"+t+i:case"_"+t+i:this.mode==y.modes.LITERAL&&this._addOutput(e),this.mode=null,this.truncate=0===e.indexOf("-")||0===e.indexOf("_");break;default:if(this.mode){switch(this.mode){case y.modes.EVAL:case y.modes.ESCAPED:case y.modes.RAW:e.lastIndexOf("//")>e.lastIndexOf("\n")&&(e+="\n")}switch(this.mode){case y.modes.EVAL:this.source+="    ; "+e+"\n";break;case y.modes.ESCAPED:this.source+="    ; __append(escapeFn("+_(e)+"))\n";break;case y.modes.RAW:this.source+="    ; __append("+_(e)+")\n";break;case y.modes.COMMENT:break;case y.modes.LITERAL:this._addOutput(e)}}else this._addOutput(e)}this.opts.compileDebug&&o&&(this.currentLine+=o,this.source+="    ; __line = "+this.currentLine+"\n")}},l.escapeXML=d.escapeXML,l.__express=l.renderFile,l.VERSION=e,l.name="ejs","undefined"!=typeof window&&(window.ejs=l)},{"../package.json":6,"./utils":2,fs:3,path:4}],2:[function(e,t,n){function r(e,t){return o.apply(e,[t])}var i=/[|\\{}()[\]^$+*?.]/g,o=Object.prototype.hasOwnProperty,s=(n.escapeRegExpChars=function(e){return e?String(e).replace(i,"\\$&"):""},{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"}),a=/[&<>'"]/g;function l(e){return s[e]||e}function u(){return Function.prototype.toString.call(this)+';\nvar _ENCODE_HTML_RULES = {\n      "&": "&amp;"\n    , "<": "&lt;"\n    , ">": "&gt;"\n    , \'"\': "&#34;"\n    , "\'": "&#39;"\n    }\n  , _MATCH_HTML = /[&<>\'"]/g;\nfunction encode_char(c) {\n  return _ENCODE_HTML_RULES[c] || c;\n};\n'}n.escapeXML=function(e){return null==e?"":String(e).replace(a,l)};try{"function"==typeof Object.defineProperty?Object.defineProperty(n.escapeXML,"toString",{value:u}):n.escapeXML.toString=u}catch(e){console.warn("Unable to set escapeXML.toString (is the Function prototype frozen?)")}n.shallowCopy=function(e,t){if(t=t||{},null!=e)for(var n in t)r(t,n)&&"__proto__"!==n&&"constructor"!==n&&(e[n]=t[n]);return e},n.shallowCopyFromList=function(e,t,n){if(n=n||[],t=t||{},null!=e)for(var i=0;i<n.length;i++){var o=n[i];void 0!==t[o]&&r(t,o)&&"__proto__"!==o&&"constructor"!==o&&(e[o]=t[o])}return e},n.cache={_data:{},set:function(e,t){this._data[e]=t},get:function(e){return this._data[e]},remove:function(e){delete this._data[e]},reset:function(){this._data={}}},n.hyphenToCamel=function(e){return e.replace(/-[a-z]/g,function(e){return e[1].toUpperCase()})},n.createNullProtoObjWherePossible="function"==typeof Object.create?function(){return Object.create(null)}:{__proto__:null}instanceof Object?function(){return{}}:function(){return{__proto__:null}}},{}],3:[function(e,t,n){},{}],4:[function(e,t,u){!function(o){function r(e,t){for(var n=0,i=e.length-1;0<=i;i--){var o=e[i];"."===o?e.splice(i,1):".."===o?(e.splice(i,1),n++):n&&(e.splice(i,1),n--)}if(t)for(;n--;)e.unshift("..");return e}function s(e,t){if(e.filter)return e.filter(t);for(var n=[],i=0;i<e.length;i++)t(e[i],i,e)&&n.push(e[i]);return n}u.resolve=function(){for(var e="",t=!1,n=arguments.length-1;-1<=n&&!t;n--){var i=0<=n?arguments[n]:o.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(e=i+"/"+e,t="/"===i.charAt(0))}return(t?"/":"")+(e=r(s(e.split("/"),function(e){return!!e}),!t).join("/"))||"."},u.normalize=function(e){var t=u.isAbsolute(e),n="/"===i(e,-1);return(e=(e=r(s(e.split("/"),function(e){return!!e}),!t).join("/"))||t?e:".")&&n&&(e+="/"),(t?"/":"")+e},u.isAbsolute=function(e){return"/"===e.charAt(0)},u.join=function(){var e=Array.prototype.slice.call(arguments,0);return u.normalize(s(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},u.relative=function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;0<=n&&""===e[n];n--);return n<t?[]:e.slice(t,n-t+1)}e=u.resolve(e).substr(1),t=u.resolve(t).substr(1);for(var i=n(e.split("/")),o=n(t.split("/")),r=Math.min(i.length,o.length),s=r,a=0;a<r;a++)if(i[a]!==o[a]){s=a;break}for(var l=[],a=s;a<i.length;a++)l.push("..");return(l=l.concat(o.slice(s))).join("/")},u.sep="/",u.delimiter=":",u.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=47===e.charCodeAt(0),n=-1,i=!0,o=e.length-1;1<=o;--o)if(47===e.charCodeAt(o)){if(!i){n=o;break}}else i=!1;return-1===n?t?"/":".":t&&1===n?"/":e.slice(0,n)},u.basename=function(e,t){e=function(e){"string"!=typeof e&&(e+="");for(var t=0,n=-1,i=!0,o=e.length-1;0<=o;--o)if(47===e.charCodeAt(o)){if(!i){t=o+1;break}}else-1===n&&(i=!1,n=o+1);return-1===n?"":e.slice(t,n)}(e);return e=t&&e.substr(-1*t.length)===t?e.substr(0,e.length-t.length):e},u.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,i=-1,o=!0,r=0,s=e.length-1;0<=s;--s){var a=e.charCodeAt(s);if(47===a){if(o)continue;n=s+1;break}-1===i&&(o=!1,i=s+1),46===a?-1===t?t=s:1!==r&&(r=1):-1!==t&&(r=-1)}return-1===t||-1===i||0===r||1===r&&t===i-1&&t===n+1?"":e.slice(t,i)};var i="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}.call(this,e("_process"))},{_process:5}],5:[function(e,t,n){var i,o,t=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}try{i="function"==typeof setTimeout?setTimeout:r}catch(e){i=r}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(e){o=s}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===r||!i)&&setTimeout)return(i=setTimeout)(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}var l,u=[],c=!1,d=-1;function h(){c&&l&&(c=!1,l.length?u=l.concat(u):d=-1,u.length)&&f()}function f(){if(!c){for(var e=a(h),t=(c=!0,u.length);t;){for(l=u,u=[];++d<t;)l&&l[d].run();d=-1,t=u.length}l=null,c=!1,!function(t){if(o===clearTimeout)return clearTimeout(t);if((o===s||!o)&&clearTimeout)return(o=clearTimeout)(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||c||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=m,t.addListener=m,t.once=m,t.off=m,t.removeListener=m,t.removeAllListeners=m,t.emit=m,t.prependListener=m,t.prependOnceListener=m,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],6:[function(e,t,n){t.exports={name:"ejs",description:"Embedded JavaScript templates",keywords:["template","engine","ejs"],version:"3.1.8",author:"Matthew Eernisse <mde@fleegix.org> (http://fleegix.org)",license:"Apache-2.0",bin:{ejs:"./bin/cli.js"},main:"./lib/ejs.js",jsdelivr:"ejs.min.js",unpkg:"ejs.min.js",repository:{type:"git",url:"git://github.com/mde/ejs.git"},bugs:"https://github.com/mde/ejs/issues",homepage:"https://github.com/mde/ejs",dependencies:{jake:"^10.8.5"},devDependencies:{browserify:"^16.5.1",eslint:"^6.8.0","git-directory-deploy":"^1.5.1",jsdoc:"^4.0.2","lru-cache":"^4.0.1",mocha:"^10.2.0","uglify-js":"^3.3.16"},engines:{node:">=0.10.0"},scripts:{test:"mocha -u tdd"}}},{}]},{},[1])(1)});var p=Object.create(null);p["form-control.html"]=' <div id="coreui-form-<%= form.id %>-control-<%= control.index %>" class="coreui-form__control_container" <% if ( ! control.show) { %>style="display:none"<% } %>> <%- control.content %> </div>',p["form-error.html"]='<div class="coreui-form__error alert alert-danger alert-dismissible fade show mb-3 <%= options.class %>"> <%- message %> <% if (options.dismiss) { %> <button type="button" class="btn-close" data-bs-dismiss="alert"></button> <% } %> </div>',p["form-field-content.html"]="<%- content %>",p["form-field-group.html"]='<div id="coreui-form-<%= id %>" class="coreui-form__group_container mb-3"> <div class="coreui-form__group_label pe-2"> <h6 class="coreui-form__field_label_text col-form-label"> <%- group.label %> <% if (group.showCollapsible) { %> <button type="button" class="btn btn-link btn-collapsible text-dark"> <% if ( ! group.show) { %> <i class="bi bi-chevron-right"></i> <% } else { %> <i class="bi bi-chevron-down"></i> <% } %> </button> <% } %> </h6> </div> <div class="coreui-form__group_content"<% if ( ! group.show) { %> style="display:none"<% } %>></div> </div>',p["form-field-label.html"]='<div id="coreui-form-<%= id %>" class="coreui-form__field_container d-flex flex-column flex-md-row mb-3<% if ( ! field.show) { %> d-none<% } %>"> <% if (field.labelWidth !== 0 && field.labelWidth !== \'0px\') { %> <div class="coreui-form__field_label text-md-end text-sm-start pe-2"<% if (field.labelWidth) { %> style="min-width:<%= field.labelWidth %>;width:<%= field.labelWidth %>"<% } %>> <div class="coreui-form__field_label_content col-form-label"> <% if (field.required) { %> <span class="coreui-form__field_label_req text-danger">*</span> <% } %> <% if (field.descriptionHelp) { %> <span class="coreui-form__field_label_help text-body-secondary" title="<%- field.descriptionHelp %>" data-bs-toggle="tooltip" data-bs-placement="bottom"> <i class="bi bi-question-circle"></i> </span> <% } %> <span class="coreui-form__field_label_text fw-medium"><%- field.label %></span> </div> <% if (field.description) { %> <div class="coreui-form__field_label_description text-muted"> <small><%- field.description %></small> </div> <% } %> </div> <% } %> <div class="coreui-form__field_content flex-fill"> <div class="d-inline-block content-<%= hash %>"> <%- content %> </div> <% if (field.outContent) { %> <span class="coreui-form__field-content-out d-inline-block align-top ps-1"> <%- field.outContent %> </span> <% } %> <% if (attachFields && attachFields.length > 0) { %> <% $.each(attachFields, function(key, attachField) { %> <div class="<% if (attachField.hasOwnProperty(\'direction\') && attachField.direction === \'column\') { %>d-block mt-2<% } else { %>d-inline-block<% } %> content-<%= attachField.hash %>"> <%- attachField.content %> </div> <% }); %> <% } %> </div> </div>',p["form.html"]='<div id="coreui-form-<%= form.id %>" class="coreui-form mb-2" <% if (widthSizes) { %>style="<%= widthSizes.join(\';\') %>"<% } %>> <% if (form.title) { %> <h5 class="mb-4"><%- form.title %></h5> <% } %> <form action="<%= form.send.url %>" method="<%= form.send.method %>"<%- formAttr %>> <div class="coreui-form__fields d-flex justify-content-start flex-column flex-wrap"></div> <% if (controls) { %> <div class="coreui-form__controls d-flex justify-content-start flex-sm-wrap flex-md-nowrap"> <% if (form.controlsOffset !== 0 && form.controlsOffset !== \'0px\') { %> <div class="d-none d-md-block" style="width:<%= form.controlsOffset %>;min-width:<%= form.controlsOffset %>"></div> <% } %> <div class="d-flex justify-content-start flex-wrap gap-2"> <% $.each(controls, function(key, control) { %> <div id="coreui-form-<%= form.id %>-control-<%= control.index %>" class="coreui-form__control_container" <% if ( ! control.show) { %>style="display:none"<% } %>> </div> <% }); %> </div> </div> <% } %> </form> </div>',p["controls/button.html"]="<button <%- render.attr %>><%- control.content %></button>",p["controls/link.html"]='<a href="<%- control.url %>"<%- render.attr %>><%- control.content %></a>',p["fields/checkbox.html"]='<% if (field.readonly) { %> <div class="coreui-form__field-readonly col-form-label"><%- render.selectedItems.join(\', \') %></div> <% } else { %> <div class="pt-2"> <% $.each(render.options, function(key, option) { %> <div class="form-check<% if (field.inline) { %> form-check-inline<% } %>"> <input <%- option.attr %>/> <label class="form-check-label" for="<%= option.id %>"><%= option.text %></label> </div> <% }); %> </div> <% } %>',p["fields/color.html"]='<% if (field.readonly) { %> <div class="coreui-form__field-readonly col-form-label rounded-1" style="width: 14px;height: 14px;background-color: <%= value %>"></div> <% } else { %> <input <%- render.attr %>/> <% if (render.datalist.length > 0) { %> <datalist id="<%= datalistId %>"> <% $.each(render.datalist, function(key, item) { %> <option <%- item.attr %>/> <% }); %> </datalist> <% } %> <% } %>',p["fields/dataset-row-readonly.html"]='<tr class="coreui-form__field-dataset-item"> <% $.each(options, function(key, option) { %> <td class="pe-2 pb-1"> <%- option.value %> </td> <% }); %> </tr>',p["fields/dataset-row.html"]='<tr class="coreui-form__field-dataset-item" id="dataset-item-<%= hashItem %>"> <% $.each(options, function(key, option) { %> <td class="pe-1 pb-1"> <% if (option.type === \'select\') { %> <select <%- option.attr %>> <% $.each(option.items, function(key, item) { %> <option <%- item.attr %>><%- item.text %></option> <% }); %> </select> <% } else if (option.type === \'switch\') { %> <div class="form-check form-switch"> <input <%- option.attr %>/> </div> <% } else { %> <input <%- option.attr %>> <% } %> </td> <% }); %> <td class="pb-1"> <button type="button" class="btn btn-link btn-dataset-remove" data-item-id="dataset-item-<%= hashItem %>"> <i class="bi bi-x text-muted"></i> </button> </td> </tr>',p["fields/dataset.html"]='<% if (field.readonly) { %> <table class="coreui-form__field-dataset-container" <% if (render.rows.length == 0) { %> style="display:none"<% } %>> <thead> <tr> <% $.each(render.headers, function(key, item) { %> <td class="text-muted pe-2"><small><%= item.title %></small></td> <% }); %> </tr> </thead> <tbody class="coreui-form__field-dataset-list"> <% $.each(render.rows, function(key, row) { %> <%- row %> <% }); %> </tbody> </table> <% } else { %> <table class="coreui-form__field-dataset-container" <% if (render.rows.length == 0) { %> style="display:none"<% } %>> <thead> <tr> <% $.each(render.headers, function(key, item) { %> <td class="text-muted"><small><%= item.title %></small></td> <% }); %> <td></td> </tr> </thead> <tbody class="coreui-form__field-dataset-list"> <% $.each(render.rows, function(key, row) { %> <%- row %> <% }); %> </tbody> </table> <button type="button" class="btn btn-link btn-dataset-add"><%= lang.dataset_add %></button> <% } %>',p["fields/file-upload.html"]=' <% if (showButton) { %> <button type="button" class="btn btn-outline-secondary fileup-btn"> <%= lang.file_upload_select %> <input type="file" id="fileup-<%= id %>"<% if (isMultiple) { %> multiple<% } %><% if (accept) { %> accept="<%= accept %>"<% } %>> </button> <% } else { %> <input type="file" id="fileup-<%= id %>"<% if (isMultiple) { %> multiple<% } %><% if (accept) { %> accept="<%= accept %>"<% } %> style="display:none"> <% } %> <% if (showDropzone) { %> <div id="fileup-<%= id %>-dropzone" class="fileup-dropzone p-4 d-inline-block text-primary-emphasis fs-5 rounded-4 text-center <% if (showButton) { %>mt-2<% } %>>"> <i class="bi bi-folder2-open"></i> <%= lang.file_upload_dropzone %> </div> <% } %> <div id="fileup-<%= id %>-queue"></div>',p["fields/hidden.html"]="<% if ( ! field.readonly) { %> <input <%- render.attr %>/> <% } %>",p["fields/input.html"]='<% if (field.readonly) { %> <div class="coreui-form__field-readonly col-form-label"><%- value %></div> <% } else { %> <input <%- render.attr %>/> <% if (render.datalist.length > 0) { %> <datalist id="<%= datalistId %>"> <% $.each(render.datalist, function(key, item) { %> <option <%- item.attr %>/> <% }); %> </datalist> <% } %> <% } %>',p["fields/modal-loading.html"]='<div class="py-4 d-flex justify-content-center align-items-center gap-2"> <div class="spinner-border mr-2"></div> <%= lang.modal_loading %> </div> ',p["fields/modal.html"]='<% if (field.readonly) { %> <div class="coreui-form__field-readonly col-form-label"><%= text %></div> <% } else { %> <div class="input-group"<% if (render.width) { %> style="width:<%= render.width %>"<% } %>> <input <%- render.attr %>/> <input type="hidden" name="<%= field.name %>" value="<%= value %>" class="coreui-form-modal-value"/> <% if ( ! field.required) { %> <button class="btn btn-outline-secondary btn-modal-clear border-secondary-subtle" type="button"> <i class="bi bi-x"></i> </button> <% } %> <button class="btn btn-outline-secondary btn-modal-select border-secondary-subtle" type="button"><%= lang.modal_select %></button> </div> <% } %>',p["fields/passwordRepeat.html"]='<% if (field.readonly) { %> <div class="coreui-form__field-readonly col-form-label"><%- value %></div> <% } else { %> <div class="d-flex gap-1 align-items-center"> <input <%- render.attr %>/> <% if (field.showBtn) { %> <div class="input-group flex-nowrap"> <input <%- render.attr2 %>/> <button class="btn btn-outline-secondary border-secondary-subtle btn-password-change" type="button" data-change="<%- lang.change %>" data-cancel="<%- lang.cancel %>"><%= btn_text %></button> </div> <% } else { %> <input <%- render.attr2 %>/> <% } %> </div> <% } %>',p["fields/radio.html"]='<% if (field.readonly) { %> <div class="coreui-form__field-readonly col-form-label"><%- render.selectedItem %></div> <% } else { %> <div class="pt-2"> <% $.each(render.options, function(key, option) { %> <div class="form-check<% if (field.inline) { %> form-check-inline<% } %>"> <input <%- option.attr %>/> <label class="form-check-label" for="<%= option.id %>"><%= option.text %></label> </div> <% }); %> </div> <% } %>',p["fields/select.html"]="<% if (field.readonly) { %> <div class=\"coreui-form__field-readonly col-form-label\"><%= render.selectedOptions.join(', ') %></div> <% } else { %> <select <%- render.attr %>> <% $.each(render.options, function(key, option) { %> <% if (option.type === 'group') { %> <optgroup<%- option.attr %>/> <% $.each(option.options, function(key, groupOption) { %> <option <%- groupOption.attr %>/><%= groupOption.text %></option> <% }); %> </optgroup> <% } else { %> <option <%- option.attr %>/><%= option.text %></option> <% } %> <% }); %> </select> <% } %>",p["fields/switch.html"]='<% if (field.readonly) { %> <div class="coreui-form__field-readonly col-form-label"><%= field.valueY == value ? lang.switch_yes : lang.switch_no %></div> <% } else { %> <div class="form-check form-switch pt-2"> <input <%- render.attr %>/> </div> <% } %>',p["fields/textarea.html"]='<% if (field.readonly) { %> <div class="coreui-form__field-readonly col-form-label"><%- value %></div> <% } else { %> <textarea <%- render.attr %>><%- value %></textarea> <% } %>',p["fields/wysiwyg.html"]='<% if (field.readonly) { %> <div class="coreui-form__field-readonly col-form-label"><%- value %></div> <% } else { %> <textarea name="<%= field.name %>" id="editor-<%= editorHash %>"><%- value %></textarea> <% } %>';var m=function(e,t,n,i){n=n||[];var o=[];if(e._events[t]instanceof Object&&0<e._events[t].length)for(var r=0;r<e._events[t].length;r++){var s=e._events[t][r].callback,a=e._events[t][r].context||i||e;o.push(s.apply(a,n)),e._events[t][r].singleExec&&(e._events[t].splice(r,1),r--)}return o},v=function(e,t){if("object"!==h(t))return null;var n=t.hasOwnProperty("type")&&"string"==typeof t.type?t.type:"input";if("group"===n)return null;s.fields.hasOwnProperty(n)||(n="input"),e._options.readonly&&(t.readonly=!0);n=new s.fields[n](e,t,e._fieldsIndex++);return e._fields.push(n),n},_=function(e,t){return"object"!==h(t)||"group"!==(t.hasOwnProperty("type")&&"string"==typeof t.type?t.type:"")?null:(t=new s.fields.group(e,t,e._groupsIndex++),e._groups.push(t),t)},y=function(e,t){if("object"!==h(t))return null;var n=t.hasOwnProperty("type")&&"string"==typeof t.type?t.type:null;if(!n||!s.controls.hasOwnProperty(n))return null;"submit"===n&&e._options.readonly&&(t.show=!1);n=$.extend(!0,{render:function(){},init:function(){},getOptions:function(){},show:function(){},hide:function(){}},s.controls[n]);return n.init(e,t,e._controlsIndex++),e._controls.push(n),n},g={getFieldValue:function(e,t){e=e.getRecord();return t&&e&&"string"==typeof t.name&&"object"===h(e)&&e.hasOwnProperty(t.name)&&0<=["string","number","object"].indexOf(h(e[t.name]))?e[t.name]:""},getFunctionByName:function(e,t){var n=e.split("."),e=n.pop();t=t||window;for(var i=0;i<n.length;i++){if(!t.hasOwnProperty(n[i]))return null;t=t[n[i]]}return"function"==typeof t[e]?t[e]:null},mergeFieldOptions:function(e,t,n){t=$.extend(!0,{},t);return n&&(t.hasOwnProperty("attr")&&"object"===h(t.attr)&&n.hasOwnProperty("attr")&&"object"===h(n.attr)&&(n.attr=this.mergeAttr(t.attr,n.attr)),t=$.extend(!0,{},t,n)),t.hasOwnProperty("width")&&(t.width?(n="number"==typeof t.width?"px":"",t.width=t.width+n):e._options.fieldWidth&&"color"!==t.type&&(n="number"==typeof e._options.fieldWidth?"px":"",t.width=e._options.fieldWidth+n)),t.hasOwnProperty("labelWidth")&&(0<=t.labelWidth&&null!==t.labelWidth?(n="number"==typeof t.labelWidth?"px":"",t.labelWidth=t.labelWidth+n):e._options.labelWidth&&(n="number"==typeof e._options.labelWidth?"px":"",t.labelWidth=e._options.labelWidth+n)),t},mergeAttr:function(e,t){var n=Object.assign({},e);return"object"===h(t)&&$.each(t,function(e,t){n.hasOwnProperty(e)?"class"===e?n[e]+=" "+t:"style"===e?n[e]+=";"+t:n[e]=t:n[e]=t}),n},getAttacheFields:function(n,i){var o=[];return"object"===h(i)&&"object"===h(i.fields)&&Array.isArray(i.fields)&&$.each(i.fields,function(e,t){t=v(n,t);"object"===h(t)&&o.push({hash:t._hash,direction:i.hasOwnProperty("fieldsDirection")?i.fieldsDirection:"row",content:t.renderContent()})}),o},formatDate:function(e){var t,n,i;return e&&10===e.length&&(t=(n=new Date(e)).getFullYear(),i=n.getMonth()+1,e=(n=(n=n.getDate())<10?"0"+n:n)+"."+(i=i<10?"0"+i:i)+"."+t),e},formatDateTime:function(e){var t,n,i,o;return e&&10<=e.length&&(n=(t=new Date(e)).getFullYear(),o=t.getMonth()+1,e=(i=(i=t.getDate())<10?"0"+i:i)+"."+(o=o<10?"0"+o:o)+"."+n+" "+("00"+t.getHours()).slice(-2)+":"+("00"+t.getMinutes()).slice(-2)+":"+("00"+t.getSeconds()).slice(-2)),e},formatDateMonth:function(e,t){var n,i;return e&&7===e.length&&(n=(i=new Date(e)).getFullYear(),i=i.getMonth(),e=(t.date_months.hasOwnProperty(i)?t.date_months[i]:"")+" "+n),e},formatDateWeek:function(e,t){var n,i;return e&&7<=e.length&&(n=e.substring(0,4),i=e.substring(6),e=n+" "+t.date_week+" "+i),e},getObjValue:function(e,t){for(var n=0,i=(t=t.split(".")).length;n<i;n++)e=e[t[n]];return e},isJson:function(e){if("string"!=typeof e)return!1;try{var t=JSON.parse(e);return"object"===h(t)||Array.isArray(t)}catch(e){return!1}},isObject:function(e){return"object"===h(e)&&!Array.isArray(e)&&null!==e},isNumeric:function(e){return("number"==typeof e||"string"==typeof e&&""!==e.trim())&&!isNaN(e)},hashCode:function(){return this.crc32(((new Date).getTime()+Math.random()).toString()).toString(16)},crc32:function(e){for(var t=[],n=0;n<256;n++){for(var i=n,o=0;o<8;o++)i=1&i?3988292384^i>>>1:i>>>1;t[n]=i}for(var r=-1,s=0;s<e.length;s++)r=r>>>8^t[255&(r^e.charCodeAt(s))];return(-1^r)>>>0},round:function(e,t){var n;return 0===(t=void 0!==t?parseInt(t):0)?Math.round(e):0<t?(n=Math.pow(10,t),Math.round(e*n)/n):(n=Math.pow(10,t),Math.round(e/n)*n)}},r={_options:{id:null,title:"",lang:"en",langList:{},send:{url:"",method:"POST",format:"form"},validResponse:{headers:null,dataType:null},width:null,minWidth:null,maxWidth:null,labelWidth:200,fieldWidth:null,controlsOffset:null,readonly:!1,validate:!1,successLoadUrl:"",errorClass:"",layout:"[position_default]",onSubmit:null,onSubmitSuccess:null,errorMessageScrollOffset:70,record:{},fields:[],controls:[]},_lock:!1,_fieldsIndex:0,_groupsIndex:0,_controlsIndex:0,_groups:[],_fields:[],_controls:[],_events:{},_init:function(e){this._options=$.extend(!0,{},this._options,e),this._options.id||(this._options.id=g.hashCode()),this._options.hasOwnProperty("labelWidth")&&0<=this._options.labelWidth&&null!==this._options.labelWidth&&(e="number"==typeof this._options.labelWidth?"px":"",this._options.labelWidth=this._options.labelWidth+e),this._options.hasOwnProperty("controlsOffset")&&null!==this._options.controlsOffset?0<=this._options.controlsOffset&&(e="number"==typeof this._options.controlsOffset?"px":"",this._options.controlsOffset=this._options.controlsOffset+e):this._options.controlsOffset=this._options.labelWidth},initEvents:function(){var e=this,t="#coreui-form-"+this._options.id+" > form";$(t).on("submit",function(){return setTimeout(function(){e.send.apply(e)},0),!1}),window.hasOwnProperty("bootstrap")&&bootstrap.hasOwnProperty("Tooltip")&&$(".coreui-form__field_label_help",t).each(function(){new bootstrap.Tooltip(this)}),m(this,"show")},getId:function(){return this._options.hasOwnProperty("id")?this._options.id:null},render:function(e){var o,r=this,t=[],n=this._options.layout&&"string"==typeof this._options.layout?this._options.layout:"[position_default]",i=[],s=[],a=(this._options.width&&(l="number"==typeof this._options.width?"px":"",t.push("width:"+this._options.width+l)),this._options.minWidth&&(l="number"==typeof this._options.minWidth?"px":"",t.push("min-width:"+this._options.minWidth+l)),this._options.maxWidth&&(l="number"==typeof this._options.maxWidth?"px":"",t.push("max-width:"+this._options.maxWidth+l)),[]),l=Array.from(n.matchAll(/\[position_([\w_\d]+)\]/g)),u=(0<l.length&&$.each(l,function(e,t){a.push(t[1]),n=n.replace("[position_"+t[1]+"]",'<div class="coreui-form-position-'+t[1]+'"></div>')}),$(n)),c=("object"===h(this._options.fields)&&Array.isArray(this._options.fields)&&0<this._options.fields.length&&(o={},0<a.length&&$.each(this._options.fields,function(e,t){var n,i=!t.hasOwnProperty("position")||"string"!=typeof t.position&&"number"!=typeof t.position?"default":0<=a.indexOf(t.position)?t.position:null;"string"==typeof i&&(n=null,n=("group"===(t.hasOwnProperty("type")&&"string"==typeof t.type?t.type:"")?_:v)(r,t))&&"object"===h(n)&&(o.hasOwnProperty(i)||(o[i]=[]),o[i].push(n.render()))}),0<=Object.keys(o).length)&&$.each(o,function(i,e){$.each(e,function(e,t){var n=u.closest(".coreui-form-position-"+i);(n=n[0]?n:u.find(".coreui-form-position-"+i)).append(t)})}),"object"===h(this._options.controls)&&Array.isArray(this._options.controls)&&0<this._options.controls.length&&$.each(this._options.controls,function(e,t){var n=y(r,t);n&&"object"===h(n)&&i.push({show:!t.hasOwnProperty("show")||t.show,index:r._controlsIndex-1,content:n.render()})}),"boolean"==typeof this._options.validate&&this._options.validate&&s.push("novalidate"),$(ejs.render(p["form.html"],{form:this._options,formAttr:s?" "+s.join(" "):"",widthSizes:t,controls:i}))),d=(c.find(".coreui-form__fields").append(u),this.getId());if($.each(i,function(e,t){c.find("#coreui-form-"+d+"-control-"+t.index).append(t.content)}),void 0===e)return c;l=null;"string"==typeof e?l=document.getElementById(e):e instanceof HTMLElement&&(l=e),l&&($(l).html(c),this.initEvents())},lock:function(){this._lock=!0,$.each(this._controls,function(e,t){var n=t.getOptions();n.hasOwnProperty("type")&&"submit"===n.type&&t.lock()})},unlock:function(){this._lock=!1,$.each(this._controls,function(e,t){var n=t.getOptions();n.hasOwnProperty("type")&&"submit"===n.type&&t.unlock()})},send:function(){if(!this._lock){if("boolean"==typeof this._options.validate&&this._options.validate)if(!this.validate())return;var e=null,n=this.getData();if($.each(this._fields,function(e,t){t.isAlloySend()||(t=t.getOptions()).hasOwnProperty("name")&&t.name&&n.hasOwnProperty(t.name)&&delete n[t.name]}),"function"==typeof this._options.onSubmit?e=this._options.onSubmit:"string"==typeof this._options.onSubmit&&this._options.onSubmit&&("function"==typeof(t=g.getFunctionByName(this._options.onSubmit))?e=t:"string"==typeof this._options.onSubmit&&(e=new Function("form","data",this._options.onSubmit))),"function"==typeof e)if(!1===e(this,n))return;var c,d,t=m(this,"send",[this,n]),i=!1;$.each(t,function(e,t){if(!1===t)return!(i=!0)}),i||(this.lock(),c=this,t=e=null,"json"===(0<=["form","json"].indexOf(this._options.send.format)?this._options.send.format:"form")?(t="application/json; charset=utf-8",e=JSON.stringify(n)):(t=!1,function t(n,i,o){i&&(Array.isArray(i)||g.isObject(i))?Object.keys(i).forEach(function(e){t(n,i[e],o?o+"["+e+"]":e)}):n.append(o,null==i?"":i)}(e=new FormData,n)),d=function(e,t,n){var i=c.getLang().send_error||"",o={};try{var r=JSON.parse(e.responseText);"object"!==h(r)||null===r||Array.isArray(r)||(o=r)}catch(e){}o.hasOwnProperty("error_message")&&"string"==typeof o.error_message&&""!==o.error_message&&(i=o.error_message),c.showError(i),m(c,"send_error",[c,e,t,n])},$.ajax({url:this._options.send.url,method:this._options.send.method,data:e,contentType:t,processData:!1,beforeSend:function(e){m(c,"send_start",[c,e])},success:function(n,e,i){var o=!0;if("object"===h(c._options.validResponse)&&(Array.isArray(c._options.validResponse.headers)&&$.each(c._options.validResponse.headers,function(e,t){if("string"==typeof t){if(i.getResponseHeader(e)!=t)return o=!1}else if(Array.isArray(t)&&t.indexOf(i.getResponseHeader(e))<0)return o=!1}),o)&&("string"==typeof c._options.validResponse.dataType?"json"!==c._options.validResponse.dataType||"object"===h(n)||Array.isArray(n)||g.isJson(n)||(o=!1):Array.isArray(c._options.validResponse.dataType)&&$.each(c._options.validResponse.dataType,function(e,t){if("json"===t&&"object"!==h(n)&&!Array.isArray(n)&&!g.isJson(n))return o=!1})),o){var t=n,r=(c.hideError(),m(c,"send_success",[c,t]),null);if("string"==typeof t)try{var s=JSON.parse(t);"object"!==h(s)||null===s||Array.isArray(s)||(r=s)}catch(e){}else r=t;if(null!==r&&"object"===h(r)&&(r.hasOwnProperty("scripts")&&Array.isArray(r.scripts)&&$.each(r.scripts,function(e,t){"string"==typeof t&&new Function(t)()}),r.hasOwnProperty("loadUrl"))&&"string"==typeof r.loadUrl&&(location.href=r.loadUrl),c._options.hasOwnProperty("onSubmitSuccess")&&("function"==typeof c._options.onSubmitSuccess?c._options.onSubmitSuccess():"string"==typeof c._options.onSubmitSuccess&&new Function(c._options.onSubmitSuccess)()),c._options.hasOwnProperty("successLoadUrl")&&"string"==typeof c._options.successLoadUrl&&""!==c._options.successLoadUrl){var a=c._options.successLoadUrl;if(null!==r&&"object"===h(r)){for(var l=new RegExp("\\[response\\.([\\d\\w\\.]+)\\]","uig"),u={};t=l.exec(a);)u[t[0]]=t[1];0<Object.keys(u).length&&$.each(u,function(e,t){t=void 0!==(t=g.getObjValue(r,t))?t:"";a=a.replace(new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),t)})}s=location.hash===a;location.href=a,s&&window.onhashchange()}}else d(i,e)},error:d,complete:function(e,t){c.unlock(),m(c,"send_end",[c,e,t])}}))}},getOptions:function(){return this._options},getRecord:function(){return this._options.hasOwnProperty("record")&&"object"===h(this._options.record)?this._options.record:{}},getData:function(){var i={};return $.each(this._fields,function(e,t){var n=t.getOptions();n.hasOwnProperty("name")&&n.name&&null!==(t=t.getValue())&&(i[n.name]=t)}),i},getFields:function(){return this._fields},getControls:function(){return this._controls},getGroups:function(){return this._groups},getField:function(i){var o={};return $.each(this._fields,function(e,t){var n=t.getOptions();n.hasOwnProperty("name")&&n.name===i&&(o=t)}),o},readonly:function(i){$.each(this._fields,function(e,t){t.readonly(i)}),$.each(this._controls,function(e,t){var n=t.getOptions();n.hasOwnProperty("type")&&"submit"===n.type&&(i?t.hide():t.show())})},showControls:function(){$.each(this._controls,function(e,t){t.show()})},hideControls:function(){$.each(this._controls,function(e,t){t.hide()})},validate:function(){var n=!0;return $.each(this._fields,function(e,t){!1===t.isValid()?(t.validate(!1),n=!1):t.validate(null)}),n},showError:function(e,t){var n=$("#coreui-form-"+this._options.id+" > form"),i=n.find("> .coreui-form__error"),i=(i[0]&&i.remove(),t="object"!==h(t)||Array.isArray(t)||null===t?{}:t,"string"==typeof this._options.errorClass&&""!==this._options.errorClass&&(t.class=t.hasOwnProperty("class")?t.class:"",t.class+=" "+this._options.errorClass),{class:t.hasOwnProperty("class")&&"string"==typeof t.class?t.class:"",dismiss:!t.hasOwnProperty("dismiss")||!!t.dismiss});n.prepend(ejs.render(p["form-error.html"],{message:e,options:i})),t.hasOwnProperty("scroll")&&!t.scroll||$("html,body").animate({scrollTop:n.offset().top-t.errorMessageScrollOffset},"fast")},hideError:function(){$("#coreui-form-"+this._options.id+" > form > .coreui-form__error").remove()},on:function(e,t,n){"object"!==h(this._events[e])&&(this._events[e]=[]),this._events[e].push({context:n||this,callback:t,singleExec:!1})},one:function(e,t,n){"object"!==h(this._events[e])&&(this._events[e]=[]),this._events[e].push({context:n||this,callback:t,singleExec:!0})},destruct:function(){$("#coreui-form-"+this._options.id).remove(),delete s._instances[this.getId()]},getLang:function(){return $.extend(!0,{},this._options.langList)}},s={lang:{},fields:{},controls:{},abstract:{},_instances:{},_settings:{labelWidth:200,lang:"en",class:"",sendDataFormat:"form",errorMessageScrollOffset:70},create:function(e){g.isObject(e)||(e={}),(e=$.extend(!0,{},e)).hasOwnProperty("lang")||(e.lang=this.getSetting("lang"));var t=this.lang.hasOwnProperty(e.lang)?this.lang[e.lang]:{},t=(e.langList=e.hasOwnProperty("langList")&&g.isObject(e.langList)?$.extend(!0,{},t,e.langList):t,e.errorMessageScrollOffset=e.hasOwnProperty("errorMessageScrollOffset")&&g.isNumeric(e.errorMessageScrollOffset)?e.errorMessageScrollOffset:this.getSetting("errorMessageScrollOffset"),e.labelWidth=e.hasOwnProperty("labelWidth")?e.labelWidth:this.getSetting("labelWidth"),e.errorClass=e.hasOwnProperty("errorClass")&&"string"==typeof e.errorClass?e.errorClass:this.getSetting("errorClass"),e.hasOwnProperty("send")&&g.isObject(e.send)&&e.send.hasOwnProperty("format")&&"string"==typeof e.send.format||(e.hasOwnProperty("send")&&g.isObject(e.send)||(e.send={}),e.send.format=this.getSetting("sendDataFormat")),$.extend(!0,{},r)),e=(t._init(e),t.getId());return this._instances[e]=t},get:function(e){return this._instances.hasOwnProperty(e)?$("#coreui-form-"+e)[0]?this._instances[e]:(delete this._instances[e],null):null},setSettings:function(e){this._settings=$.extend({},this._settings,e)},getSetting:function(e){var t=null;return t=this._settings.hasOwnProperty(e)?this._settings[e]:t}},u=(s.lang.ru={modal_select:"Выбрать",modal_loading:"Загрузка...",switch_yes:"Да",switch_no:"Нет",dataset_add:"Добавить",date_months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],date_week:"неделя",file_upload_select:"Выберите файл",file_upload_dropzone:"Поместите сюда свои файлы",send_error:"Произошла ошибка. Попробуйте снова или обратитесь к администратору",required_field:"Обязательное поле",change:"изменить",cancel:"отмена"},s.lang.en={modal_select:"Select",modal_loading:"Loading...",switch_yes:"Yes",switch_no:"No",dataset_add:"Add",date_months:["January","February","March","April","May","June","July","August","September","October","November","December"],date_week:"week",file_upload_select:"Выберите файл",file_upload_dropzone:"Drop your files here",send_error:"An error has occurred. Please try again or contact your administrator",required_field:"Required field",change:"change",cancel:"cancel"},s.controls.button={_form:null,_index:null,_options:{type:"button",content:null,onClick:null,attr:{class:"btn btn-secondary"}},init:function(e,t,n){this._options=$.extend({},this._options,t),this._form=e,this._index=n;var i=this;e.on("show",function(){i._initEvents()})},getOptions:function(){return $.extend(!0,{},this._options)},render:function(){var n=[],e=this.getOptions();return e.attr.type="button",$.each(e.attr,function(e,t){n.push(e+'="'+t+'"')}),ejs.render(p["controls/button.html"],{control:this._options,render:{attr:0<n.length?" "+n.join(" "):""}})},show:function(e){$("#coreui-form-"+this._form.getId()+"-control-"+this._index).show(e||0)},hide:function(e){$("#coreui-form-"+this._form.getId()+"-control-"+this._index).hide(e||0)},lock:function(){var e=$("#coreui-form-"+this._form.getId()+"-control-"+this._index+" > button");e.find(".spinner-border")[0]||e.prepend('<span class="spinner-border spinner-border-sm"></span> '),e.attr("disabled")||e.attr("disabled","disabled")},_initEvents:function(){var t=this;0<=["function","string"].indexOf(h(this._options.onClick))&&$("#coreui-form-"+this._form.getId()+"-control-"+this._index+" > button").click(function(e){"function"==typeof t._options.onClick?t._options.onClick(t._form,e):new Function("form","event",t._options.onClick)(t._form,e)})}},s.controls.custom={_form:null,_index:null,_options:{type:"custom",content:null},init:function(e,t,n){this._options=$.extend({},this._options,t),this._form=e,this._index=n},getOptions:function(){return $.extend(!0,{},this._options)},show:function(e){$("#coreui-form-"+form.getId()+"-control-"+this._index).show(e||0)},hide:function(e){$("#coreui-form-"+form.getId()+"-control-"+this._index).hide(e||0)},render:function(){return this._options.content}},s.controls.link={_form:null,_index:null,_options:{type:"link",url:null,content:null,onClick:null,attr:{class:"btn btn-link"}},init:function(e,t,n){this._options=$.extend({},this._options,t),this._form=e,this._index=n;var i=this;e.on("show",function(){i._initEvents()})},getOptions:function(){return $.extend(!0,{},this._options)},show:function(e){$("#coreui-form-"+this._form.getId()+"-control-"+this._index).show(e||0)},hide:function(e){$("#coreui-form-"+this._form.getId()+"-control-"+this._index).hide(e||0)},lock:function(){var e=$("#coreui-form-"+this._form.getId()+"-control-"+this._index+" > button");e.find(".spinner-border")[0]||e.prepend('<span class="spinner-border spinner-border-sm"></span> '),e.attr("disabled")||e.attr("disabled","disabled")},render:function(){var n=[],e=this.getOptions();return $.each(e.attr,function(e,t){n.push(e+'="'+t+'"')}),ejs.render(p["controls/link.html"],{control:this._options,render:{attr:0<n.length?" "+n.join(" "):""}})},_initEvents:function(){var t=this;0<=["function","string"].indexOf(h(this._options.onClick))&&$("#coreui-form-"+this._form.getId()+"-control-"+this._index+" > a").click(function(e){"function"==typeof t._options.onClick?t._options.onClick(t._form,e):new Function("form","event",t._options.onClick)(t._form,e)})}},s.controls.submit={_form:null,_index:null,_options:{type:"submit",content:null,onClick:null,show:!0,attr:{class:"btn btn-primary"}},init:function(e,t,n){this._options=$.extend({},this._options,t),this._form=e,this._index=n;var i=this;e.on("show",function(){i._initEvents()})},getOptions:function(){return $.extend(!0,{},this._options)},show:function(e){$("#coreui-form-"+this._form.getId()+"-control-"+this._index).show(e||0)},hide:function(e){$("#coreui-form-"+this._form.getId()+"-control-"+this._index).hide(e||0)},lock:function(){var e=$("#coreui-form-"+this._form.getId()+"-control-"+this._index+" > button");e.find(".spinner-border")[0]||e.prepend('<span class="spinner-border spinner-border-sm"></span> '),e.attr("disabled")||e.attr("disabled","disabled")},unlock:function(){var e=$("#coreui-form-"+this._form.getId()+"-control-"+this._index+" > button");e.find(".spinner-border").remove(),e.removeAttr("disabled")},render:function(){var n=[],e=this.getOptions();return e.attr.type="submit",$.each(e.attr,function(e,t){n.push(e+'="'+t+'"')}),ejs.render(p["controls/button.html"],{control:this._options,render:{attr:0<n.length?" "+n.join(" "):""}})},_initEvents:function(){var t=this;0<=["function","string"].indexOf(h(this._options.onClick))&&$("#coreui-form-"+this._form.getId()+"-control-"+this._index+" > button").click(function(e){"function"==typeof t._options.onClick?t._options.onClick(t._form,e):new Function("form","event",t._options.onClick)(t._form,e)})}},function(){return e(function e(t,n,i){a(this,e),c(this,"_id",null),c(this,"_form",null),c(this,"_index",0),c(this,"_hash",""),c(this,"_value",null),c(this,"_options",{type:"",name:null,noSend:null,required:null,show:!0,position:null,readonly:null}),this._form=t,this._index=i,this._id=t.getId()+"-field-"+(n.hasOwnProperty("name")?n.name:i),this._hash=g.hashCode(),this._value=g.getFieldValue(t,n),this._options=g.mergeFieldOptions(t,this._options,n)},[{key:"getOptions",value:function(){return $.extend(!0,{},this._options)}},{key:"show",value:function(e){$("#coreui-form-"+this._id).addClass("d-flex").removeClass("d-none").css("opacity",0).animate({opacity:1},e||200,function(){$(this).css("opacity","")})}},{key:"hide",value:function(e){$("#coreui-form-"+this._id).animate({opacity:0},e||200,function(){$(this).removeClass("d-flex").addClass("d-none").css("opacity","")})}},{key:"readonly",value:function(e){this._value=this.getValue(),this._options.readonly=!!e,$(".content-"+this._hash).html(this.renderContent())}},{key:"getValue",value:function(){return null}},{key:"setValue",value:function(e){}},{key:"validate",value:function(e,t){}},{key:"isValid",value:function(){return null}},{key:"isAlloySend",value:function(){return!this._options.noSend}},{key:"render",value:function(){var e=this.getOptions(),t=g.getAttacheFields(this._form,e);return ejs.render(p["form-field-label.html"],{id:this._id,form:this._form,hash:this._hash,field:e,content:this.renderContent(),attachFields:t})}},{key:"renderContent",value:function(){return""}}])}());s.abstract.field=u;var b=function(){function o(e,t,n){return a(this,o),t=$.extend(!0,{type:"checkbox",name:null,label:null,labelWidth:null,inline:!1,outContent:null,description:null,errorText:null,options:[],fields:null,required:null,readonly:null,show:!0},t),i=this,e=[e,t,n],t=d(t=o),f(i,function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}}}()?Reflect.construct(t,e||[],d(i).constructor):t.apply(i,e));var i}return t(o,u),e(o,[{key:"getValue",value:function(){var e;return this._options.readonly?this._value:(e=[],$(".content-"+this._hash+" input[type=checkbox]:checked").each(function(){e.push($(this).val())}),e)}},{key:"setValue",value:function(t){if(!(["string","number","object"].indexOf(h(t))<0)){if("object"===h(t)){if(null!==t&&!Array.isArray(t))return}else t=[t];var e,i,o=this;this._value=[],this._options.readonly?($(".content-"+o._hash).empty(),(e=this.getOptions()).hasOwnProperty("options")&&"object"===h(e.options)&&Array.isArray(e.options)&&Array.isArray(t)&&(i=[],$.each(e.options,function(e,n){n.hasOwnProperty("value")&&$.each(t,function(e,t){if(n.value==t)return n.hasOwnProperty("text")&&0<=["string","number"].indexOf(h(n.text))&&i.push(n.text),o._value.push(t),!1})}),$(".content-"+o._hash).text(i.join(", ")))):($(".content-"+this._hash+" input[type=radio]").prop("checked",!1),Array.isArray(t)&&$(".content-"+this._hash+" input[type=radio]").each(function(e,n){$.each(t,function(e,t){if(t==$(n).val())return $(n).prop("checked",!0),o._value.push(t),!1})}))}}},{key:"validate",value:function(e,t){var n,i,o;this._options.readonly||(n=$(".content-"+this._hash),i=$(".form-check:last-child",n),o=$("input",n),n.find(".valid-feedback").remove(),n.find(".invalid-feedback").remove(),null===e?(o.removeClass("is-invalid"),o.removeClass("is-valid")):e?(o.removeClass("is-invalid"),o.addClass("is-valid"),"string"==typeof(t=void 0===t&&"string"==typeof this._options.validText?this._options.validText:t)&&i.append('<div class="valid-feedback">'+t+"</div>")):(o.removeClass("is-valid"),o.addClass("is-invalid"),void 0===t&&("string"==typeof this._options.invalidText?t=this._options.invalidText:!t&&this._options.required&&(t=this._form.getLang().required_field)),"string"==typeof t&&i.append('<div class="invalid-feedback">'+t+"</div>")))}},{key:"isValid",value:function(){return!(this._options.required&&!this._options.readonly)||0<this.getValue().length}},{key:"render",value:function(){var e=this.getOptions(),e=g.getAttacheFields(this._form,e);return ejs.render(p["form-field-label.html"],{id:this._id,form:this._form,hash:this._hash,field:this._options,content:this.renderContent(),attachFields:e})}},{key:"renderContent",value:function(){var r=this,s=[],a=this.getOptions(),l=[],e=(a.hasOwnProperty("options")&&"object"===h(a.options)&&Array.isArray(a.options)&&$.each(a.options,function(e,n){var i=[],o={type:"checkbox",class:"form-check-input"},t=n.hasOwnProperty("text")&&0<=["string","number"].indexOf(h(n.text))?n.text:"";a.name&&(o.name=r._options.name),a.required&&(o.required="required"),$.each(n,function(e,t){"text"!==e&&(o[e]="class"===e?o[e]+" "+t:t)}),o.id=g.hashCode(),"object"===h(r._value)&&Array.isArray(r._value)?$.each(r._value,function(e,t){if(t==n.value)return o.checked="checked",n.hasOwnProperty("text")&&n.text&&l.push(n.text),!1}):r._value==n.value&&(n.hasOwnProperty("text")&&n.text&&l.push(n.text),o.checked="checked"),$.each(o,function(e,t){i.push(e+'="'+t+'"')}),s.push({id:o.id,text:t,attr:0<i.length?" "+i.join(" "):""})}),"object"===h(this._value)&&Array.isArray(this._value)?this._value.join(", "):this._value);return ejs.render(p["fields/checkbox.html"],{field:a,value:e,render:{options:s,selectedItems:l}})}}])}();s.fields.checkbox=b;var w=function(){function o(e,t,n){return a(this,o),t=$.extend(!0,{type:"text",name:null,label:null,labelWidth:null,width:null,outContent:null,description:null,errorText:null,fields:null,attr:{class:"form-control d-inline-block"},required:null,invalidText:null,validText:null,readonly:null,datalist:null,show:!0,position:null,noSend:null},t),i=this,e=[e,t,n],t=d(t=o),f(i,function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}}}()?Reflect.construct(t,e||[],d(i).constructor):t.apply(i,e));var i}return t(o,u),e(o,[{key:"getValue",value:function(){return this._options.readonly?this._value:$(".content-"+this._hash+" input").val()}},{key:"setValue",value:function(e){["string","number"].indexOf(h(e))<0||(this._value=e,this._options.readonly?$(".content-"+this._hash).text(e):$(".content-"+this._hash+" input").val(e))}},{key:"validate",value:function(e,t){var n,i;this._options.readonly||(n=$(".content-"+this._hash),i=$("input",n),n.find(".valid-feedback").remove(),n.find(".invalid-feedback").remove(),null===e?(i.removeClass("is-invalid"),i.removeClass("is-valid")):e?(i.removeClass("is-invalid"),i.addClass("is-valid"),"string"==typeof(t=void 0===t&&"string"==typeof this._options.validText?this._options.validText:t)&&n.append('<div class="valid-feedback">'+t+"</div>")):(i.removeClass("is-valid"),i.addClass("is-invalid"),void 0===t&&("string"==typeof this._options.invalidText?t=this._options.invalidText:!t&&this._options.required&&(t=this._form.getLang().required_field)),"string"==typeof t&&n.append('<div class="invalid-feedback">'+t+"</div>")))}},{key:"isValid",value:function(){var e=$(".content-"+this._hash+" input");return e[0]?e.is(":valid"):null}},{key:"renderContent",value:function(){return this._options.readonly?this._renderContentReadonly():this._renderContent()}},{key:"_renderContent",value:function(){var n=[],i=[],e=this.getOptions(),t=g.hashCode();return e.hasOwnProperty("attr")&&"object"===h(e.attr)&&null!==e.attr&&!Array.isArray(e.attr)||(e.attr={}),e.name&&(e.attr.name=this._options.name),e.attr.type=e.type,e.attr.value=null!==this._value?this._value:"",e.width&&(e.attr=g.mergeAttr({style:"width:"+e.width},e.attr)),e.required&&(e.attr.required="required"),e.hasOwnProperty("datalist")&&"object"===h(e.datalist)&&Array.isArray(e.datalist)&&(e.attr.list=t,$.each(e.datalist,function(e,t){var n=[];$.each(t,function(e,t){n.push(e+'="'+t+'"')}),i.push({attr:0<n.length?" "+n.join(" "):""})})),$.each(e.attr,function(e,t){n.push(e+'="'+t+'"')}),ejs.render(p["fields/input.html"],{field:e,datalistId:t,value:null!==this._value?this._value:"",render:{attr:0<n.length?" "+n.join(" "):"",datalist:i}})}},{key:"_renderContentReadonly",value:function(){var e=this.getOptions(),t="text",n=this._value,i=this._form.getLang();e.hasOwnProperty("type")&&"string"==typeof e.type&&(t=e.type);try{switch(t){case"date":n=g.formatDate(n);break;case"datetime-local":n=g.formatDateTime(n);break;case"month":n=g.formatDateMonth(n,i);break;case"week":n=g.formatDateWeek(n,i)}}catch(e){console.error(e)}return ejs.render(p["fields/input.html"],{field:e,value:n,hash:this._hash})}}])}();s.fields.input=w;b=function(){function o(e,t,n){return a(this,o),t=$.extend(!0,{type:"color",name:null,label:null,labelWidth:null,width:null,outContent:null,description:null,errorText:null,fields:null,attr:{class:"form-control form-control-color d-inline-block"},required:null,readonly:null,datalist:null,show:!0,position:null,noSend:null},t),i=this,e=[e,t,n],t=d(t=o),f(i,function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}}}()?Reflect.construct(t,e||[],d(i).constructor):t.apply(i,e));var i}return t(o,w),e(o,[{key:"_renderContent",value:function(){var n=[],i=[],e=this.getOptions(),t=g.hashCode();return e.hasOwnProperty("attr")&&"object"===h(e.attr)&&null!==e.attr&&!Array.isArray(e.attr)||(e.attr={}),e.name&&(e.attr.name=this._options.name),e.attr.type=e.type,e.attr.value=this._value,e.width&&(e.attr=g.mergeAttr({style:"width:"+e.width},e.attr)),e.required&&(e.attr.required="required"),e.hasOwnProperty("datalist")&&"object"===h(e.datalist)&&Array.isArray(e.datalist)&&(e.attr.list=t,$.each(e.datalist,function(e,t){var n=[];$.each(t,function(e,t){n.push(e+'="'+t+'"')}),i.push({attr:0<n.length?" "+n.join(" "):""})})),$.each(e.attr,function(e,t){n.push(e+'="'+t+'"')}),ejs.render(p["fields/color.html"],{field:e,datalistId:t,value:this._value,render:{attr:0<n.length?" "+n.join(" "):"",datalist:i}})}},{key:"_renderContentReadonly",value:function(){var e=this.getOptions();return ejs.render(p["fields/color.html"],{field:e,value:this._value})}}])}();s.fields.color=b;b=function(){function o(e,t,n){return a(this,o),t=$.extend(!0,{type:"custom",label:null,labelWidth:null,width:null,content:"",outContent:null,description:null,required:null,show:!0},t),i=this,e=[e,t,n],t=d(t=o),f(i,function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}}}()?Reflect.construct(t,e||[],d(i).constructor):t.apply(i,e));var i}return t(o,u),e(o,[{key:"readonly",value:function(e){this._options.readonly=!!e}},{key:"getValue",value:function(){var e,t,n;return this._options.readonly?this._value:(e=null,1===(t=$(".content-"+this._hash+" input,select,textarea")).length?e=$(t).val():(n={},t.each(function(){var e=$(this).attr("name");e&&(n[e]=$(this).val())}),0<Object.keys(n).length&&(e=n)),e)}},{key:"render",value:function(){var n=this,e=this.getOptions(),t=g.getAttacheFields(this._form,e),i=$(ejs.render(p["form-field-label.html"],{id:this._id,form:this._form,hash:this._hash,field:e,content:"",attachFields:t}));return $.each(this.renderContent(),function(e,t){i.find(".content-"+n._hash).append(t)}),i}},{key:"renderContent",value:function(){var e=this.getOptions().content,t=[];if("string"==typeof e)t.push(e);else if(e instanceof Object){Array.isArray(e)||(e=[e]);for(var n,i=0;i<e.length;i++)"string"==typeof e[i]?t.push(e[i]):!Array.isArray(e[i])&&e[i].hasOwnProperty("component")&&"string"==typeof e[i].component&&"coreui"===e[i].component.substring(0,6)?(n=e[i].component.split(".")[1],CoreUI.hasOwnProperty(n)&&g.isObject(CoreUI[n])&&(n=CoreUI[n].create(e[i]),t.push(n.render()),this._form.on("show",n.initEvents,n,!0))):t.push(JSON.stringify(e[i]))}return t}}])}();s.fields.custom=b;b=function(){function o(e,l,t){a(this,o),l=$.extend(!0,{type:"dataset",name:null,label:null,labelWidth:null,outContent:null,description:null,errorText:null,fields:null,required:null,readonly:null,show:!0,position:null,noSend:null},l),n=this,t=[e,l,t],i=d(i=o),c(i=f(n,function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}}}()?Reflect.construct(i,t||[],d(n).constructor):i.apply(n,t)),"_renderOptions",[]);var n,i,u=i;return e.on("show",function(){u._options.readonly||u._initEvents()}),l.hasOwnProperty("options")&&"object"===h(l.options)&&Array.isArray(l.options)&&$.each(l.options,function(e,t){var n=t.hasOwnProperty("name")&&0<=["string","number"].indexOf(h(t.name))?t.name:"",i=t.hasOwnProperty("type")&&"string"==typeof t.type?t.type:"text",o=t.hasOwnProperty("attr")&&"object"===h(t.attr)&&!Array.isArray(t.attr)?t.attr:{},r=t.hasOwnProperty("items")&&"object"===h(t.items)&&Array.isArray(t.items)?t.items:[],s=t.hasOwnProperty("valueY")&&0<=["string","number"].indexOf(h(t.valueY))?t.valueY:"Y",a=t.hasOwnProperty("valueN")&&0<=["string","number"].indexOf(h(t.valueN))?t.valueN:"N",t=t.hasOwnProperty("width")&&0<=["string","number"].indexOf(h(t.width))?t.width:null;n&&(o.name=n),l.required&&(o.required="required"),"select"===i?o.class=o.hasOwnProperty("class")?"form-select "+o.class:"form-select":"switch"===i?(o.class=o.hasOwnProperty("class")?"form-check-input "+o.class:"form-check-input",o.type="checkbox",o.value=s):(o.class=o.hasOwnProperty("class")?"form-control "+o.class:"form-control",o.type=i),u._renderOptions.push({type:i,name:n,attr:o,items:r,valueY:s,valueN:a,width:t})}),i}return t(o,u),e(o,[{key:"readonly",value:function(e){l(d(o.prototype),"readonly",this).call(this,e),e||this._initEvents()}},{key:"getValue",value:function(){var e,t;return this._options.readonly?this._value:(e=$(".content-"+this._hash),t=[],$(".coreui-form__field-dataset-list .coreui-form__field-dataset-item",e).each(function(){var n={};$.each($(this).find("input, select").serializeArray(),function(e,t){t.name&&(n[t.name]=t.value)}),t.push(n)}),t)}},{key:"setValue",value:function(e){g.isObject(e)&&(this._value.push(e),this._options.readonly?$(".content-"+this._hash+" .coreui-form__field-dataset-list").append(this._renderRowReadonly(e)):this._eventAdd(e))}},{key:"validate",value:function(e,t){var n;this._options.readonly||((n=$(".content-"+this._hash)).find(".text-success").remove(),n.find(".text-danger").remove(),null!==e&&(e?"string"==typeof(t=void 0===t&&"string"==typeof this._options.validText?this._options.validText:t)&&n.append('<div class="ps-2 text-success">'+t+"</div>"):(void 0===t&&("string"==typeof this._options.invalidText?t=this._options.invalidText:!t&&this._options.required&&(t=this._form.getLang().required_field)),"string"==typeof t&&n.append('<div class="ps-2 text-danger">'+t+"</div>"))))}},{key:"isValid",value:function(){return!(this._options.required&&!this._options.readonly)||0<this.getValue().length}},{key:"removeItems",value:function(){$("#coreui-form-"+this._id+" .content-"+this._hash+" .coreui-form__field-dataset-list").empty()}},{key:"removeItem",value:function(e){var t="#coreui-form-"+this._id+" .content-"+this._hash;$("#"+e).hide("fast",function(){$("#"+e).remove(),0===$(t+" .coreui-form__field-dataset-item").length&&$(t+" .coreui-form__field-dataset-container").hide()})}},{key:"renderContent",value:function(){return this._options.readonly?this._renderContentReadonly():this._renderContent()}},{key:"_renderContent",value:function(){var e=this.getOptions(),n=[],i=[],o=this;return e.hasOwnProperty("options")&&"object"===h(e.options)&&Array.isArray(e.options)&&($.each(e.options,function(e,t){t=t.hasOwnProperty("title")&&0<=["string","number"].indexOf(h(t.title))?t.title:"";i.push({title:t})}),"object"===h(this._value))&&Array.isArray(this._value)&&$.each(this._value,function(e,t){"object"!==h(t)||Array.isArray(t)||n.push(o._renderRow(t))}),ejs.render(p["fields/dataset.html"],{field:e,value:null!==this._value?this._value:"",lang:this._form.getLang(),render:{headers:i,rows:n}})}},{key:"_renderContentReadonly",value:function(){var e=this.getOptions(),n=[],i=[],o=this;return e.hasOwnProperty("options")&&"object"===h(e.options)&&Array.isArray(e.options)&&($.each(e.options,function(e,t){t=t.hasOwnProperty("title")&&0<=["string","number"].indexOf(h(t.title))?t.title:"";i.push({title:t})}),"object"===h(this._value))&&Array.isArray(this._value)&&$.each(this._value,function(e,t){"object"!==h(t)||Array.isArray(t)||n.push(o._renderRowReadonly(t))}),ejs.render(p["fields/dataset.html"],{field:e,value:null!==this._value?this._value:"",lang:this._form.getLang(),render:{headers:i,rows:n}})}},{key:"_initEvents",value:function(){var e=this,t="#coreui-form-"+this._id+" .content-"+this._hash;$(t+" .btn-dataset-remove").click(function(){e.removeItem($(this).data("item-id"))}),$(t+" .btn-dataset-add").click(function(){e._eventAdd()})}},{key:"_eventAdd",value:function(e){var t=this,n="#coreui-form-"+this._id+" .content-"+this._hash;e=e||{},0===$(n+" .coreui-form__field-dataset-item").length&&$(n+" .coreui-form__field-dataset-container").show(),$(n+" .coreui-form__field-dataset-list").append(this._renderRow(e)),$(n+" .coreui-form__field-dataset-item:last-child .btn-dataset-remove").click(function(){t.removeItem($(this).data("item-id"))})}},{key:"_renderRow",value:function(o){var r=[],a=[];return $.each(this._renderOptions,function(e,t){var n,s=o.hasOwnProperty(t.name)?o[t.name]:"",i=("select"===t.type?$.each(t.items,function(e,t){var n=t.hasOwnProperty("text")&&0<=["string","number"].indexOf(h(t.text))?t.text:"",i=t.hasOwnProperty("value")&&0<=["string","number"].indexOf(h(t.value))?t.value:"",o={},r=($.each(t,function(e,t){"text"!==e&&(o[e]=t)}),"object"===h(s)&&Array.isArray(s)?$.each(s,function(e,t){if(t==i)return!(o.selected="selected")}):s==t.value&&(o.selected="selected"),[]);$.each(o,function(e,t){r.push(e+'="'+t+'"')}),a.push({attr:0<r.length?" "+r.join(" "):"",text:n})}):"switch"===t.type?s==t.valueY&&(t.attr.checked="checked"):0<=["string","number"].indexOf(h(s))&&(t.attr.value=null!==s?s:""),0<t.width&&null!==t.width&&(n="number"==typeof t.width?"px":"",n=t.width+n,t.attr=g.mergeAttr(t.attr||{},{style:"width:"+n})),[]);$.each(t.attr,function(e,t){i.push(e+'="'+t+'"')}),r.push({type:t.type,attr:0<i.length?" "+i.join(" "):"",items:a})}),ejs.render(p["fields/dataset-row.html"],{hashItem:g.hashCode(),options:r})}},{key:"_renderRowReadonly",value:function(s){var a=[],l=this._form.getLang();return $.each(this._renderOptions,function(e,t){var n="",o=s.hasOwnProperty(t.name)?s[t.name]:"";if("select"===t.type){var r=[];$.each(t.items,function(e,t){var n=t.hasOwnProperty("text")&&0<=["string","number"].indexOf(h(t.text))?t.text:"",i=t.hasOwnProperty("value")&&0<=["string","number"].indexOf(h(t.value))?t.value:"";Array.isArray(o)?$.each(o,function(e,t){if(t==i)return r.push(n),!1}):o==i&&r.push(n)})}else if("switch"===t.type){var i="Y";t.hasOwnProperty("valueY")&&(i=t.valueY),n=o==i?l.switch_yes:l.switch_no}else if(0<=["string","number"].indexOf(h(o)))switch(n=o,t.type){case"date":n=g.formatDate(n);break;case"datetime-local":n=g.formatDateTime(n);break;case"month":n=g.formatDateMonth(n,l);break;case"week":n=g.formatDateWeek(n,l);break;default:n=o}a.push({value:n})}),ejs.render(p["fields/dataset-row-readonly.html"],{options:a})}}])}(),s.fields.dataset=b,b=function(){return e(function e(t,n,i){a(this,e),c(this,"_id",""),c(this,"_form",null),c(this,"_index",0),c(this,"_options",{type:"group",label:"",show:!0,showCollapsible:!0,fields:[],column:null}),this._form=t,this._index=i,this._id=t.getId()+"-group-"+i,this._options=$.extend(!0,{},this._options,n);var o=this;t.on("show",function(){o._initEvents()})},[{key:"getOptions",value:function(){return $.extend(!0,{},this._options,options)}},{key:"collapse",value:function(e){var t="#coreui-form-"+this._id;$(t+" > .coreui-form__group_label .btn-collapsible .bi").removeClass("bi-chevron-down"),$(t+" > .coreui-form__group_label .btn-collapsible .bi").addClass("bi-chevron-right"),$(t+" .coreui-form__group_content").slideUp(e)}},{key:"expand",value:function(e){var t="#coreui-form-"+this._id;$(t+" > .coreui-form__group_label .btn-collapsible .bi").removeClass("bi-chevron-right"),$(t+" > .coreui-form__group_label .btn-collapsible .bi").addClass("bi-chevron-down"),$(t+" .coreui-form__group_content").slideDown(e)}},{key:"render",value:function(){var e=$(ejs.render(p["form-field-group.html"],{id:this._id,form:this._form,group:this._options})),t=this.renderContent(),n=e.find(".coreui-form__group_content");return $.each(t,function(e,t){n.append(t)}),e}},{key:"renderContent",value:function(){var n=[],i=this;return $.each(this._options.fields,function(e,t){t=v(i._form,t);"object"===h(t)&&n.push(t.render())}),n}},{key:"_initEvents",value:function(){var e,t;this._options.showCollapsible&&(t="#coreui-form-"+(e=this)._id,$(t+" > .coreui-form__group_label .btn-collapsible").click(function(){$(t+" > .coreui-form__group_content").is(":visible")?e.collapse(80):e.expand(80)}))}}])}();s.fields.group=b;var b=function(){function o(e,t,n){return a(this,o),t=$.extend(!0,{type:"hidden",name:null,attr:{},required:null},t),i=this,e=[e,t,n],t=d(t=o),f(i,function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}}}()?Reflect.construct(t,e||[],d(i).constructor):t.apply(i,e));var i}return t(o,u),e(o,[{key:"getValue",value:function(){return this._options.readonly?this._value:$("#coreui-form-"+this._id).val()}},{key:"setValue",value:function(e){["string","number"].indexOf(h(e))<0||(this._value=e,this._options.readonly)||$("#coreui-form-"+this._id).val(e)}},{key:"render",value:function(){return ejs.render(p["form-field-content.html"],{content:this.renderContent()})}},{key:"renderContent",value:function(){var n=[],e=this.getOptions();return e.hasOwnProperty("attr")&&"object"===h(e.attr)&&null!==e.attr&&!Array.isArray(e.attr)||(e.attr={}),e.attr.id="coreui-form-"+this._id,e.name&&(e.attr.name=e.name),e.attr.type="hidden",e.attr.value=null!==this._value?this._value:"",$.each(e.attr,function(e,t){n.push(e+'="'+t+'"')}),ejs.render(p["fields/hidden.html"],{value:null!==this._value?this._value:"",field:e,render:{attr:0<n.length?" "+n.join(" "):""}})}}])}();s.fields.hidden=b,b=function(s){function a(c,g,b){var o,w={invalid:[],getCaret:function(){try{var e,t=0,n=c.get(0),i=document.selection,o=n.selectionStart;return i&&-1===navigator.appVersion.indexOf("MSIE 10")?((e=i.createRange()).moveStart("character",-w.val().length),t=e.text.length):!o&&"0"!==o||(t=o),t}catch(e){}},setCaret:function(e){try{var t,n;c.is(":focus")&&((n=c.get(0)).setSelectionRange?n.setSelectionRange(e,e):((t=n.createTextRange()).collapse(!0),t.moveEnd("character",e),t.moveStart("character",e),t.select()))}catch(e){}},events:function(){c.on("keydown.mask",function(e){c.data("mask-keycode",e.keyCode||e.which),c.data("mask-previus-value",c.val()),c.data("mask-previus-caret-pos",w.getCaret()),w.maskDigitPosMapOld=w.maskDigitPosMap}).on(s.jMaskGlobals.useInput?"input.mask":"keyup.mask",w.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){c.keydown().keyup()},100)}).on("change.mask",function(){c.data("changed",!0)}).on("blur.mask",function(){r===w.val()||c.data("changed")||c.trigger("change"),c.data("changed",!1)}).on("blur.mask",function(){r=w.val()}).on("focus.mask",function(e){!0===b.selectOnFocus&&s(e.target).select()}).on("focusout.mask",function(){b.clearIfNotMatch&&!o.test(w.val())&&w.val("")})},getRegexMask:function(){for(var e,t,n,i,o,r=[],s=0;s<g.length;s++)(n=x.translation[g.charAt(s)])?(e=n.pattern.toString().replace(/.{1}$|^.{1}/g,""),t=n.optional,(n=n.recursive)?(r.push(g.charAt(s)),i={digit:g.charAt(s),pattern:e}):r.push(t||n?e+"?":e)):r.push(g.charAt(s).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return o=r.join(""),i&&(o=o.replace(new RegExp("("+i.digit+"(.*"+i.digit+")?)"),"($1)?").replace(new RegExp(i.digit,"g"),i.pattern)),new RegExp(o)},destroyEvents:function(){c.off(["input","keydown","keyup","paste","drop","blur","focusout",""].join(".mask "))},val:function(e){var t=c.is("input")?"val":"text",e=0<arguments.length?(c[t]()!==e&&c[t](e),c):c[t]();return e},calculateCaretPosition:function(e){var t=w.getMasked(),n=w.getCaret();if(e!==t){for(var i=c.data("mask-previus-caret-pos")||0,o=t.length,t=e.length,r=0,s=0,a=0,l=0,u=0,u=n;u<o&&w.maskDigitPosMap[u];u++)s++;for(u=n-1;0<=u&&w.maskDigitPosMap[u];u--)r++;for(u=n-1;0<=u;u--)w.maskDigitPosMap[u]&&a++;for(u=i-1;0<=u;u--)w.maskDigitPosMapOld[u]&&l++;t<n?n=10*o:n<=i&&i!==t?w.maskDigitPosMapOld[n]||(e=n,w.maskDigitPosMap[n=n-(l-a)-r]&&(n=e)):i<n&&(n=n+(a-l)+s)}return n},behaviour:function(e){e=e||window.event,w.invalid=[];var t,n,i=c.data("mask-keycode");if(-1===s.inArray(i,x.byPassKeys))return i=w.getMasked(),t=w.getCaret(),n=c.data("mask-previus-value")||"",setTimeout(function(){w.setCaret(w.calculateCaretPosition(n))},s.jMaskGlobals.keyStrokeCompensation),w.val(i),w.setCaret(t),w.callbacks(e)},getMasked:function(e,t){for(var n,i,o=[],r=void 0===t?w.val():t+"",s=0,a=g.length,l=0,u=r.length,c=1,d="push",h=-1,f=0,p=[],m=b.reverse?(d="unshift",c=-1,n=0,s=a-1,l=u-1,function(){return-1<s&&-1<l}):(n=a-1,function(){return s<a&&l<u});m();){var v=g.charAt(s),_=r.charAt(l),y=x.translation[v];y?(_.match(y.pattern)?(o[d](_),y.recursive&&(-1===h?h=s:s===n&&s!==h&&(s=h-c),n===h)&&(s-=c),s+=c):_===i?(f--,i=void 0):y.optional?(s+=c,l-=c):y.fallback?(o[d](y.fallback),s+=c,l-=c):w.invalid.push({p:l,v:_,e:y.pattern}),l+=c):(e||o[d](v),_===v?(p.push(l),l+=c):(i=v,p.push(l+f),f++),s+=c)}t=g.charAt(n),a!==u+1||x.translation[t]||o.push(t),t=o.join("");return w.mapMaskdigitPositions(t,p,u),t},mapMaskdigitPositions:function(e,t,n){var i=b.reverse?e.length-n:0;w.maskDigitPosMap={};for(var o=0;o<t.length;o++)w.maskDigitPosMap[t[o]+i]=1},callbacks:function(e){function t(e,t,n){"function"==typeof b[e]&&t&&b[e].apply(this,n)}var n=w.val(),i=n!==r,o=[n,e,c,b];t("onChange",!0==i,o),t("onKeyPress",!0==i,o),t("onComplete",n.length===g.length,o),t("onInvalid",0<w.invalid.length,[n,e,c,w.invalid,b])}},x=(c=s(c),this),r=w.val();g="function"==typeof g?g(w.val(),void 0,c,b):g,x.mask=g,x.options=b,x.remove=function(){var e=w.getCaret();return x.options.placeholder&&c.removeAttr("placeholder"),c.data("mask-maxlength")&&c.removeAttr("maxlength"),w.destroyEvents(),w.val(x.getCleanVal()),w.setCaret(e),c},x.getCleanVal=function(){return w.getMasked(!0)},x.getMaskedVal=function(e){return w.getMasked(!1,e)},x.init=function(e){if(e=e||!1,b=b||{},x.clearIfNotMatch=s.jMaskGlobals.clearIfNotMatch,x.byPassKeys=s.jMaskGlobals.byPassKeys,x.translation=s.extend({},s.jMaskGlobals.translation,b.translation),x=s.extend(!0,{},x,b),o=w.getRegexMask(),e)w.events(),w.val(w.getMasked());else{b.placeholder&&c.attr("placeholder",b.placeholder),c.data("mask")&&c.attr("autocomplete","off");for(var t=0,n=!0;t<g.length;t++){var i=x.translation[g.charAt(t)];if(i&&i.recursive){n=!1;break}}n&&c.attr("maxlength",g.length).data("mask-maxlength",!0),w.destroyEvents(),w.events();e=w.getCaret();w.val(w.getMasked()),w.setCaret(e)}},x.init(!c.is("input"))}function t(){var e=s(this),t={},n="data-mask-",i=e.attr("data-mask");if(e.attr(n+"reverse")&&(t.reverse=!0),e.attr(n+"clearifnotmatch")&&(t.clearIfNotMatch=!0),"true"===e.attr(n+"selectonfocus")&&(t.selectOnFocus=!0),l(e,i,t))return e.data("mask",new a(this,i,t))}function l(e,t,n){n=n||{};var i=s(e).data("mask"),o=JSON.stringify,e=s(e).val()||s(e).text();try{return"function"==typeof t&&(t=t(e)),"object"!=typeof i||o(i.options)!==o(n)||i.mask!==t}catch(e){}}s.maskWatchers={};s.fn.mask=function(e,t){t=t||{};function n(){if(l(this,e,t))return s(this).data("mask",new a(this,e,t))}var i=this.selector,o=s.jMaskGlobals,r=o.watchInterval,o=t.watchInputs||o.watchInputs;return s(this).each(n),i&&""!==i&&o&&(clearInterval(s.maskWatchers[i]),s.maskWatchers[i]=setInterval(function(){s(document).find(i).each(n)},r)),this},s.fn.masked=function(e){return this.data("mask").getMaskedVal(e)},s.fn.unmask=function(){return clearInterval(s.maskWatchers[this.selector]),delete s.maskWatchers[this.selector],this.each(function(){var e=s(this).data("mask");e&&e.remove().removeData("mask")})},s.fn.cleanVal=function(){return this.data("mask").getCleanVal()},s.applyDataMask=function(e){((e=e||s.jMaskGlobals.maskElements)instanceof s?e:s(e)).filter(s.jMaskGlobals.dataMaskAttr).each(t)};var e,n,i={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,keyStrokeCompensation:10,useInput:!/Chrome\/[2-4][0-9]|SamsungBrowser/.test(window.navigator.userAgent)&&(i="input",n=document.createElement("div"),(e=(i="on"+i)in n)||(n.setAttribute(i,"return;"),e="function"==typeof n[i]),n=null,e),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};s.jMaskGlobals=s.jMaskGlobals||{},(i=s.jMaskGlobals=s.extend(!0,{},i,s.jMaskGlobals)).dataMask&&s.applyDataMask(),setInterval(function(){s.jMaskGlobals.watchDataMask&&s.applyDataMask()},i.watchInterval)},x=window.jQuery,k=window.Zepto,"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof exports&&"undefined"==typeof Meteor?module.exports=b(require("jquery")):b(x||k);b=function(){function r(e,t,n){a(this,r),t=$.extend(!0,{type:"mask",name:null,label:null,labelWidth:null,width:null,outContent:null,description:null,errorText:null,fields:null,attr:{class:"form-control d-inline-block"},required:null,readonly:null,datalist:null,show:!0,position:null,noSend:null},t),i=this,t=[e,t,n],n=d(n=r);var i,o=n=f(i,function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}}}()?Reflect.construct(n,t||[],d(i).constructor):n.apply(i,t));return e.on("show",function(){o._options.readonly||o._initEvents()}),n}return t(r,w),e(r,[{key:"readonly",value:function(e){l(d(r.prototype),"readonly",this).call(this,e),e||this._initEvents()}},{key:"setValue",value:function(e){["string","number"].indexOf(h(e))<0||(e=e.replace(/[^\d\w]/g,""),this._value=e,this._options.readonly?$(".content-"+this._hash).text(e):$(".content-"+this._hash+" input").val(e))}},{key:"_renderContent",value:function(){var n=[],i=[],e=this.getOptions(),t=g.hashCode();return e.hasOwnProperty("attr")&&"object"===h(e.attr)&&null!==e.attr&&!Array.isArray(e.attr)||(e.attr={}),e.name&&(e.attr.name=this._options.name),e.attr.type="text",e.attr.value=null!==this._value?this._value:"",e.width&&(e.attr=g.mergeAttr({style:"width:"+e.width},e.attr)),e.required&&(e.attr.required="required"),e.hasOwnProperty("datalist")&&"object"===h(e.datalist)&&Array.isArray(e.datalist)&&(e.attr.list=t,$.each(e.datalist,function(e,t){var n=[];$.each(t,function(e,t){n.push(e+'="'+t+'"')}),i.push({attr:0<n.length?" "+n.join(" "):""})})),$.each(e.attr,function(e,t){n.push(e+'="'+t+'"')}),ejs.render(p["fields/input.html"],{field:e,datalistId:t,value:null!==this._value?this._value:"",render:{attr:0<n.length?" "+n.join(" "):"",datalist:i}})}},{key:"_renderContentReadonly",value:function(){var e=this.getOptions();return ejs.render(p["fields/input.html"],{field:e,value:null!==this._value?this._value:""})}},{key:"_initEvents",value:function(){$("#coreui-form-"+this._id+" .content-"+this._hash+" input").mask(this._options.mask,this._options.options)}}])}();s.fields.mask=b;var x=function(){function s(e,t,n){a(this,s),t=$.extend(!0,{type:"modal",name:null,label:null,labelWidth:null,width:null,outContent:null,description:null,errorText:null,fields:[],options:{title:"",size:"lg",url:"",onHidden:null,onClear:null,onChange:null},required:null,readonly:null,show:!0,position:null,noSend:null},t),o=this,n=[e,t,n],i=d(i=s),c(i=f(o,function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}}}()?Reflect.construct(i,n||[],d(o).constructor):i.apply(o,n)),"_text","");var i,o=e.getRecord(),r=("string"==typeof t.name&&o.hasOwnProperty(t.name)&&0<=["object"].indexOf(h(o[t.name]))&&(n=o[t.name],i._value=n.hasOwnProperty("value")&&0<=["number","string"].indexOf(h(n.value))?n.value:"",i._text=n.hasOwnProperty("text")&&0<=["number","string"].indexOf(h(n.text))?n.text:""),i);return e.on("show",function(){r._initEvents()}),i}return t(s,u),e(s,[{key:"readonly",value:function(e){l(d(s.prototype),"readonly",this).call(this,e),e||this._initEvents()}},{key:"getValue",value:function(){return this._options.readonly?this._value:$(".content-"+this._hash+" input.coreui-form-modal-value").val()}},{key:"setValue",value:function(e){var t,n,i,o;g.isObject(e)&&(t=e.hasOwnProperty("text")&&"string"==typeof e.text?e.text:"",e=e.hasOwnProperty("value")&&"string"==typeof e.value?e.value:"",this._value=e,this._options.readonly?$(".content-"+this._hash).text(t):(o=$(".content-"+this._hash+" .coreui-form-modal-value"),n=$(".content-"+this._hash+" .coreui-form-modal-text"),i=o.val(),o.val(e),n.val(t),i!=e&&((o=this._options.hasOwnProperty("options")&&"object"===h(this._options.options)?this._options.options:{}).hasOwnProperty("onChange")&&("function"==typeof o.onChange?o.onChange(this):"string"==typeof o.onChange&&new Function("modal",o.onChange)(this)),m(this._form,"change-modal.coreui.form",[this],this))))}},{key:"validate",value:function(e,t){var n;this._options.readonly||((n=$(".content-"+this._hash)).find(".text-success").remove(),n.find(".text-danger").remove(),null!==e&&(e?"string"==typeof(t=void 0===t&&"string"==typeof this._options.validText?this._options.validText:t)&&n.append('<div class="ps-2 text-success">'+t+"</div>"):(void 0===t&&("string"==typeof this._options.invalidText?t=this._options.invalidText:!t&&this._options.required&&(t=this._form.getLang().required_field)),"string"==typeof t&&n.append('<div class="ps-2 text-danger">'+t+"</div>"))))}},{key:"isValid",value:function(){return!(this._options.required&&!this._options.readonly&&!this.getValue())}},{key:"renderContent",value:function(){var e=this.getOptions(),n=[],t={type:"text",readonly:"readonly",class:"form-control coreui-form-modal-text",value:null!==this._text?this._text:""};return e.required&&(t.required="required"),e.hasOwnProperty("attr")&&"object"===h(e.attr)&&Array.isArray(e.attr)&&(t=g.mergeAttr(t,e.attr)),$.each(t,function(e,t){n.push(e+'="'+t+'"')}),ejs.render(p["fields/modal.html"],{field:e,value:null!==this._value?this._value:"",text:null!==this._text?this._text:"",lang:this._form.getLang(),render:{width:this._options.width,attr:0<n.length?n.join(" "):""}})}},{key:"_initEvents",value:function(){var l=this,u=this._options.hasOwnProperty("options")&&"object"===h(this._options.options)?this._options.options:{};$(".content-"+this._hash+" .btn-modal-clear").click(function(e){u.hasOwnProperty("onClear")&&("function"==typeof u.onClear?u.onClear(l):"string"==typeof u.onClear&&new Function("field",u.onClear)(l)),m(l._form,"modal_clear",[l,e],l),l.setValue({value:"",text:""})}),$(".content-"+this._hash+" .btn-modal-select").click(function(e){var t,n,i,o,r=u.hasOwnProperty("title")&&"string"==typeof u.title?u.title:"",s=u.hasOwnProperty("size")&&"string"==typeof u.size?u.size:"lg",a=u.hasOwnProperty("url")&&"string"==typeof u.url?u.url:"";a&&(t=g.hashCode(),n=ejs.render(p["fields/modal-loading.html"],{lang:l._form.getLang()}),CoreUI.hasOwnProperty("modal")&&(o=i=null,u.hasOwnProperty("onHidden")&&("function"==typeof u.onHidden?o=u.onHidden:"string"==typeof u.onHidden&&(o=new Function(u.onHidden))),u.hasOwnProperty("onShow")&&("function"==typeof u.onShow?i=u.onShow:"string"==typeof u.onShow&&(i=new Function(u.onShow))),CoreUI.modal.show(r,n,{id:t,size:s,onShow:i,onHidden:o})),$.ajax({url:a,method:"GET",beforeSend:function(e){m(l._form,"modal_load_before",[l,e],l)},success:function(e){$("#modal-"+t+" .modal-body").html(e),m(l._form,"modal_load_success",[l,e],l)},error:function(e,t,n){m(l._form,"modal_load_error",[l,e,t,n],l)},complete:function(e,t){m(l._form,"modal_load_complete",[l,e,t],l)}}),m(l._form,"modal_select",[l,e],l))})}}])}();s.fields.modal=x;var k=function(){function r(e,t,n){a(this,r),t=$.extend(!0,{type:"number",name:null,label:null,labelWidth:null,width:null,outContent:null,description:null,errorText:null,fields:null,attr:{class:"form-control d-inline-block",step:"any"},required:null,readonly:null,datalist:null,show:!0,position:null,precision:null,noSend:null},t),i=this,t=[e,t,n],n=d(n=r),null===(n=f(i,function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}}}()?Reflect.construct(n,t||[],d(i).constructor):n.apply(i,t)))._options.precision&&(i=0,n._options.attr.hasOwnProperty("step")&&"any"!==n._options.attr.step&&0<=["string","number"].indexOf(h(n._options.attr.step))&&(t=$.trim(n._options.attr.step.toString()).match(/\.(\d+)$/))&&t.hasOwnProperty(1)&&(i=t?t[1].length:i),n._options.precision=i);var i,o=n;return e.on("show",function(){o._options.readonly||o._initEvents()}),n}return t(r,u),e(r,[{key:"readonly",value:function(e){l(d(r.prototype),"readonly",this).call(this,e),e||this._initEvents()}},{key:"getValue",value:function(){return this._options.readonly?this._value:$(".content-"+this._hash+" input").val()}},{key:"setValue",value:function(e){["string","number"].indexOf(h(e))<0||!e.toString().match(/^\-?\d+\.?\d*$/)||(0<=this._options.precision&&(e=g.round(e,this._options.precision)),this._options.attr.hasOwnProperty("min")&&(e=e<Number(this._options.attr.min)?Number(this._options.attr.min):e),this._options.attr.hasOwnProperty("max")&&(e=e>Number(this._options.attr.max)?Number(this._options.attr.max):e),this._value=e,this._options.readonly?$(".content-"+this._hash).text(e):$(".content-"+this._hash+" input").val(e))}},{key:"validate",value:function(e,t){var n,i;this._options.readonly||(n=$(".content-"+this._hash),i=$("input",n),n.find(".valid-feedback").remove(),n.find(".invalid-feedback").remove(),null===e?(i.removeClass("is-invalid"),i.removeClass("is-valid")):e?(i.removeClass("is-invalid"),i.addClass("is-valid"),"string"==typeof(t=void 0===t&&"string"==typeof this._options.validText?this._options.validText:t)&&n.append('<div class="valid-feedback">'+t+"</div>")):(i.removeClass("is-valid"),i.addClass("is-invalid"),void 0===t&&("string"==typeof this._options.invalidText?t=this._options.invalidText:!t&&this._options.required&&(t=this._form.getLang().required_field)),"string"==typeof t&&n.append('<div class="invalid-feedback">'+t+"</div>")))}},{key:"isValid",value:function(){var e=$(".content-"+this._hash+" input");return e[0]?e.is(":valid"):null}},{key:"renderContent",value:function(){var n=[],i=[],e=this.getOptions(),t=g.hashCode();return e.hasOwnProperty("attr")&&"object"===h(e.attr)&&null!==e.attr&&!Array.isArray(e.attr)||(e.attr={}),e.name&&(e.attr.name=this._options.name),e.attr.type="number",e.attr.value=null!==this._value?this._value:"",e.width&&(e.attr=g.mergeAttr({style:"width:"+e.width},e.attr)),e.required&&(e.attr.required="required"),e.hasOwnProperty("datalist")&&"object"===h(e.datalist)&&Array.isArray(e.datalist)&&(e.attr.list=t,$.each(e.datalist,function(e,t){var n=[];$.each(t,function(e,t){n.push(e+'="'+t+'"')}),i.push({attr:0<n.length?" "+n.join(" "):""})})),$.each(e.attr,function(e,t){n.push(e+'="'+t+'"')}),ejs.render(p["fields/input.html"],{field:e,datalistId:t,value:null!==this._value?this._value:"",render:{attr:0<n.length?" "+n.join(" "):"",datalist:i}})}},{key:"_initEvents",value:function(){$(".content-"+this._hash+" input").keydown(function(e){var t=e.keyCode||e.which;(!(35<=t&&t<=40||96<=t&&t<=105||189===t||109===t||110===t||190===t||9===t||46===t||8===t||!e.shiftKey&&48<=t&&t<=57)||e.ctrlKey&&e.altKey)&&e.preventDefault()});var n=this;$(".content-"+this._hash+" input").blur(function(e){var t=$(this).val();0<=n._options.precision&&(t=g.round(t,n._options.precision)),n._options.attr.hasOwnProperty("min")&&(t=t<Number(n._options.attr.min)?Number(n._options.attr.min):t),n._options.attr.hasOwnProperty("max")&&(t=t>Number(n._options.attr.max)?Number(n._options.attr.max):t),$(this).val(t)})}}])}();s.fields.number=k;b=function(){function o(e,t,n){return a(this,o),t=$.extend(!0,{type:"radio",name:null,label:null,labelWidth:null,inline:!1,outContent:null,description:null,errorText:null,options:[],fields:[],required:null,readonly:null,show:!0,position:null,noSend:null},t),i=this,e=[e,t,n],t=d(t=o),f(i,function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}}}()?Reflect.construct(t,e||[],d(i).constructor):t.apply(i,e));var i}return t(o,u),e(o,[{key:"getValue",value:function(){return this._options.readonly?this._value:$(".content-"+this._hash+" input[type=radio]:checked").val()}},{key:"setValue",value:function(n){var i,e;["string","number"].indexOf(h(n))<0||(this._options.readonly?(e=(i=this).getOptions()).hasOwnProperty("options")&&"object"===h(e.options)&&Array.isArray(e.options)&&$.each(e.options,function(e,t){if(t.hasOwnProperty("value")&&t.value==n)return t=t.hasOwnProperty("text")&&0<=["string","number"].indexOf(h(t.text))?t.text:"",$(".content-"+i._hash).text(t),i._value=n,!1}):(e=$(".content-"+this._hash+' input[type=radio][value="'+n+'"]'))[0]&&(e.prop("checked",!0),this._value=n))}},{key:"validate",value:function(e,t){var n,i,o;this._options.readonly||(n=$(".content-"+this._hash),i=$(".form-check:last-child",n),o=$("input",n),n.find(".valid-feedback").remove(),n.find(".invalid-feedback").remove(),null===e?(o.removeClass("is-invalid"),o.removeClass("is-valid")):e?(o.removeClass("is-invalid"),o.addClass("is-valid"),"string"==typeof(t=void 0===t&&"string"==typeof this._options.validText?this._options.validText:t)&&i.append('<div class="valid-feedback">'+t+"</div>")):(o.removeClass("is-valid"),o.addClass("is-invalid"),void 0===t&&("string"==typeof this._options.invalidText?t=this._options.invalidText:!t&&this._options.required&&(t=this._form.getLang().required_field)),"string"==typeof t&&i.append('<div class="invalid-feedback">'+t+"</div>")))}},{key:"isValid",value:function(){var e;return!(this._options.required&&!this._options.readonly)||"string"==typeof(e=this.getValue())&&""!==e}},{key:"renderContent",value:function(){var r=this,s=[],a=this.getOptions(),l=[];return a.hasOwnProperty("options")&&"object"===h(a.options)&&Array.isArray(a.options)&&$.each(a.options,function(e,t){var n=[],i={type:"radio",class:"form-check-input"},o=t.hasOwnProperty("text")&&0<=["string","number"].indexOf(h(t.text))?t.text:"";a.name&&(i.name=r._options.name),a.required&&(i.required="required"),$.each(t,function(e,t){"text"!==e&&(i[e]="class"===e?i[e]+" "+t:t)}),i.id=g.hashCode(),r._value==t.value&&(t.hasOwnProperty("text")&&t.text&&l.push(t.text),i.checked="checked"),$.each(i,function(e,t){n.push(e+'="'+t+'"')}),s.push({id:i.id,text:o,attr:0<n.length?" "+n.join(" "):""})}),ejs.render(p["fields/radio.html"],{field:a,value:this._value,render:{options:s,selectedItem:l}})}}])}();s.fields.radio=b;x=function(){function o(e,t,n){return a(this,o),t=$.extend(!0,{type:"range",name:null,label:null,labelWidth:null,width:null,outContent:null,description:null,errorText:null,fields:null,attr:{class:"form-range d-inline-block pt-1"},required:null,readonly:null,datalist:null,show:!0,position:null,noSend:null},t),i=this,e=[e,t,n],t=d(t=o),f(i,function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}}}()?Reflect.construct(t,e||[],d(i).constructor):t.apply(i,e));var i}return t(o,u),e(o,[{key:"getValue",value:function(){return this._options.readonly?this._value:$(".content-"+this._hash+" input").val()}},{key:"setValue",value:function(e){["string","number"].indexOf(h(e))<0||(this._value=e,this._options.readonly?$(".content-"+this._hash).text(e):$(".content-"+this._hash+" input").val(e))}},{key:"validate",value:function(e,t){var n,i;this._options.readonly||(n=$(".content-"+this._hash),i=$("input",n),n.find(".valid-feedback").remove(),n.find(".invalid-feedback").remove(),null===e?(i.removeClass("is-invalid"),i.removeClass("is-valid")):e?(i.removeClass("is-invalid"),i.addClass("is-valid"),"string"==typeof(t=void 0===t&&"string"==typeof this._options.validText?this._options.validText:t)&&n.append('<div class="valid-feedback">'+t+"</div>")):(i.removeClass("is-valid"),i.addClass("is-invalid"),void 0===t&&("string"==typeof this._options.invalidText?t=this._options.invalidText:!t&&this._options.required&&(t=this._form.getLang().required_field)),"string"==typeof t&&n.append('<div class="invalid-feedback">'+t+"</div>")))}},{key:"isValid",value:function(){var e=$(".content-"+this._hash+" input");return e[0]?e.is(":valid"):null}},{key:"renderContent",value:function(){var n=[],i=[],e=this.getOptions(),t=g.hashCode();return e.hasOwnProperty("attr")&&"object"===h(e.attr)&&null!==e.attr&&!Array.isArray(e.attr)||(e.attr={}),e.name&&(e.attr.name=this._options.name),e.attr.type="range",e.attr.value=this._value,e.width&&(e.attr=g.mergeAttr({style:"width:"+e.width},e.attr)),e.required&&(e.attr.required="required"),e.hasOwnProperty("datalist")&&"object"===h(e.datalist)&&Array.isArray(e.datalist)&&(e.attr.list=t,$.each(e.datalist,function(e,t){var n=[];$.each(t,function(e,t){n.push(e+'="'+t+'"')}),i.push({attr:0<n.length?" "+n.join(" "):""})})),$.each(e.attr,function(e,t){n.push(e+'="'+t+'"')}),ejs.render(p["fields/input.html"],{field:e,datalistId:t,value:this._value,render:{attr:0<n.length?" "+n.join(" "):"",datalist:i}})}}])}();s.fields.range=x;k=function(){function o(e,t,n){return a(this,o),t=$.extend(!0,{type:"select",name:null,label:null,labelWidth:null,width:null,outContent:null,description:null,errorText:null,fields:null,attr:{class:"form-select d-inline-block"},required:null,readonly:null,show:!0,position:null,noSend:null},t),i=this,e=[e,t,n],t=d(t=o),f(i,function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}}}()?Reflect.construct(t,e||[],d(i).constructor):t.apply(i,e));var i}return t(o,u),e(o,[{key:"getValue",value:function(){var e;return this._options.readonly?this._value:this._options.hasOwnProperty("attr")&&"object"===h(this._options.attr)&&null!==this._options.attr&&!Array.isArray(this._options.attr)&&this._options.attr.hasOwnProperty("multiple")?(e=[],$(".content-"+this._hash+" select option:selected").each(function(){e.push($(this).val())}),e):$(".content-"+this._hash+" select option:selected").val()}},{key:"setValue",value:function(t){if(!(["string","number","object"].indexOf(h(t))<0)){if("object"===h(t)){if(null!==t&&!Array.isArray(t))return}else t=[t];var e,i,o=this;this._value=[],this._options.readonly?($(".content-"+o._hash).empty(),(e=this.getOptions()).hasOwnProperty("options")&&"object"===h(e.options)&&Array.isArray(e.options)&&Array.isArray(t)&&(i=[],$.each(e.options,function(e,n){n.hasOwnProperty("value")&&$.each(t,function(e,t){if(n.value==t)return n.hasOwnProperty("text")&&0<=["string","number"].indexOf(h(n.text))&&i.push(n.text),o._value.push(t),!1})}),$(".content-"+o._hash).text(i.join(", ")))):($(".content-"+this._hash+" select > option").prop("selected",!1),Array.isArray(t)&&$(".content-"+this._hash+" select > option").each(function(e,n){$.each(t,function(e,t){if(t==$(n).val())return $(n).prop("selected",!0),o._value.push(t),!1})}))}}},{key:"validate",value:function(e,t){var n,i;this._options.readonly||(n=$(".content-"+this._hash),i=$("select",n),n.find(".valid-feedback").remove(),n.find(".invalid-feedback").remove(),null===e?(i.removeClass("is-invalid"),i.removeClass("is-valid")):e?(i.removeClass("is-invalid"),i.addClass("is-valid"),"string"==typeof(t=void 0===t&&"string"==typeof this._options.validText?this._options.validText:t)&&n.append('<div class="valid-feedback">'+t+"</div>")):(i.removeClass("is-valid"),i.addClass("is-invalid"),void 0===t&&("string"==typeof this._options.invalidText?t=this._options.invalidText:!t&&this._options.required&&(t=this._form.getLang().required_field)),"string"==typeof t&&n.append('<div class="invalid-feedback">'+t+"</div>")))}},{key:"isValid",value:function(){var e=$(".content-"+this._hash+" select");return(!this._options.required||""!==e.val())&&(e[0]?e.is(":valid"):null)}},{key:"renderContent",value:function(){return this._options.readonly?this._renderContentReadonly():this._renderContent()}},{key:"_renderContent",value:function(){var o=this,e=this.getOptions(),n=[],r=[];return e.hasOwnProperty("attr")&&"object"===h(e.attr)&&null!==e.attr&&!Array.isArray(e.attr)||(e.attr={}),e.name&&(e.attr.name=this._options.name),e.width&&(e.attr=g.mergeAttr({style:"width:"+e.width},e.attr)),e.required&&(e.attr.required="required"),e.hasOwnProperty("options")&&"object"===h(e.options)&&null!==e.options&&$.each(e.options,function(e,t){var n,i;"string"==typeof t||"number"==typeof t?r.push(o._renderOption({type:"option",value:e,text:t})):"object"===h(t)&&("group"===(t.hasOwnProperty("type")&&"string"==typeof t.type?t.type:"option")?(n=[],e={},i=[],t.hasOwnProperty("attr")&&"object"===h(t.attr)&&null!==t.attr&&!Array.isArray(t.attr)&&(e=t.attr),t.hasOwnProperty("label")&&0<=["string","number"].indexOf(h(t.label))&&(e.label=t.label),$.each(e,function(e,t){n.push(e+'="'+t+'"')}),Array.isArray(t.options)&&$.each(t.options,function(e,t){i.push(o._renderOption(t))}),r.push({type:"group",attr:0<n.length?" "+n.join(" "):"",options:i})):r.push(o._renderOption(t)))}),$.each(e.attr,function(e,t){n.push(e+'="'+t+'"')}),ejs.render(p["fields/select.html"],{field:e,value:this._value,render:{attr:0<n.length?" "+n.join(" "):"",options:r}})}},{key:"_renderContentReadonly",value:function(){var t=this,e=this.getOptions(),o=[];return e.hasOwnProperty("options")&&"object"===h(e.options)&&Array.isArray(e.options)&&$.each(e.options,function(e,n){var i;"group"===(n.hasOwnProperty("type")&&"string"==typeof n.type?n.type:"option")?Array.isArray(n.options)&&$.each(n.options,function(e,n){var i=n.hasOwnProperty("text")&&0<=["string","number"].indexOf(h(n.text))?n.text:"";i&&""!==i&&(Array.isArray(t._value)?$.each(t._value,function(e,t){if(t==n.value)return o.push(i),!1}):t._value==n.value&&o.push(i))}):(i=n.hasOwnProperty("text")&&0<=["string","number"].indexOf(h(n.text))?n.text:"")&&""!==i&&(Array.isArray(t._value)?$.each(t._value,function(e,t){if(t==n.value)return o.push(i),!1}):t._value==n.value&&o.push(i))}),ejs.render(p["fields/select.html"],{field:e,render:{selectedOptions:o}})}},{key:"_renderOption",value:function(n){var i=[],e=n.hasOwnProperty("text")&&0<=["string","number"].indexOf(h(n.text))?n.text:"";return $.each(n,function(e,t){"text"!==e&&i.push(e+'="'+t+'"')}),Array.isArray(this._value)?$.each(this._value,function(e,t){if(t==n.value)return i.push('selected="selected"'),!1}):this._value==n.value&&i.push('selected="selected"'),{type:"option",text:e,attr:0<i.length?" "+i.join(" "):""}}}])}();s.fields.select=k;b=function(){function o(e,t,n){return a(this,o),t=$.extend(!0,{type:"switch",name:null,label:null,labelWidth:null,outContent:null,description:null,errorText:null,valueY:"Y",valueN:"N",fields:[],required:null,readonly:null,show:!0,position:null,noSend:null},t),i=this,e=[e,t,n],t=d(t=o),f(i,function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}}}()?Reflect.construct(t,e||[],d(i).constructor):t.apply(i,e));var i}return t(o,u),e(o,[{key:"getValue",value:function(){var e=this._options.readonly?this._value:$(".content-"+this._hash+" input").prop("checked")?this._options.valueY:this._options.valueN;return e}},{key:"setValue",value:function(e){["string","number"].indexOf(h(e))<0||(this._value=e,this._options.readonly?$(".content-"+this._hash).text(e):$(".content-"+this._hash+" input[type=checkbox]").prop("checked",e===this._options.valueY))}},{key:"validate",value:function(e,t){var n,i,o;this._options.readonly||(n=$(".content-"+this._hash),i=$(".form-switch",n),o=$("input",n),n.find(".valid-feedback").remove(),n.find(".invalid-feedback").remove(),null===e?(o.removeClass("is-invalid"),o.removeClass("is-valid")):e?(o.removeClass("is-invalid"),o.addClass("is-valid"),"string"==typeof(t=void 0===t&&"string"==typeof this._options.validText?this._options.validText:t)&&i.append('<div class="valid-feedback">'+t+"</div>")):(o.removeClass("is-valid"),o.addClass("is-invalid"),"string"==typeof(t=void 0===t?"string"==typeof this._options.invalidText?this._options.invalidText:t||this._form.getLang().required_field:t)&&i.append('<div class="invalid-feedback">'+t+"</div>")))}},{key:"renderContent",value:function(){var n=[],e=this.getOptions(),t={type:"checkbox",class:"form-check-input",value:e.valueY};return e.name&&(t.name=this._options.name),e.required&&(t.required="required"),e.hasOwnProperty("attr")&&"object"===h(e.attr)&&Array.isArray(e.attr)&&(t=g.mergeAttr(t,e.attr)),this._value===e.valueY&&(t.checked="checked"),$.each(t,function(e,t){n.push(e+'="'+t+'"')}),ejs.render(p["fields/switch.html"],{field:e,value:this._value,lang:this._form.getLang(),render:{attr:0<n.length?n.join(" "):""}})}}])}();s.fields.switch=b;x=function(){function o(e,t,n){return a(this,o),t=$.extend(!0,{type:"textarea",name:null,label:null,labelWidth:null,width:null,height:null,outContent:null,description:null,errorText:null,fields:null,attr:{class:"form-control d-inline-block"},required:null,readonly:null,show:!0,position:null,noSend:null},t),i=this,e=[e,t,n],t=d(t=o),f(i,function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}}}()?Reflect.construct(t,e||[],d(i).constructor):t.apply(i,e));var i}return t(o,u),e(o,[{key:"getValue",value:function(){return this._options.readonly?this._value:$(".content-"+this._hash+" textarea").val()}},{key:"setValue",value:function(e){["string","number"].indexOf(h(e))<0||(this._value=e,this._options.readonly?$(".content-"+this._hash).text(e):$(".content-"+this._hash+" textarea").val(e))}},{key:"validate",value:function(e,t){var n,i;this._options.readonly||(n=$(".content-"+this._hash),i=$("textarea",n),n.find(".valid-feedback").remove(),n.find(".invalid-feedback").remove(),null===e?(i.removeClass("is-invalid"),i.removeClass("is-valid")):e?(i.removeClass("is-invalid"),i.addClass("is-valid"),"string"==typeof(t=void 0===t&&"string"==typeof this._options.validText?this._options.validText:t)&&n.append('<div class="valid-feedback">'+t+"</div>")):(i.removeClass("is-valid"),i.addClass("is-invalid"),void 0===t&&("string"==typeof this._options.invalidText?t=this._options.invalidText:!t&&this._options.required&&(t=this._form.getLang().required_field)),"string"==typeof t&&n.append('<div class="invalid-feedback">'+t+"</div>")))}},{key:"isValid",value:function(){var e=$(".content-"+this._hash+" textarea");if(e[0])return e.is(":valid")}},{key:"renderContent",value:function(){var e,n=[],t=this.getOptions();return t.hasOwnProperty("attr")&&"object"===h(t.attr)&&null!==t.attr&&!Array.isArray(t.attr)||(t.attr={}),t.name&&(t.attr.name=this._options.name),0<=t.width&&null!==t.width&&(e=g.isNumeric(t.width)?"px":"",t.attr=g.mergeAttr(t.attr,{style:"width:"+t.width+e})),0<=t.height&&null!==t.height&&(e=g.isNumeric(t.height)?"px":"",t.attr=g.mergeAttr(t.attr,{style:"height:"+t.height+e})),t.required&&(t.attr.required="required"),$.each(t.attr,function(e,t){n.push(e+'="'+t+'"')}),ejs.render(p["fields/textarea.html"],{field:t,value:null!==this._value?this._value:"",render:{attr:0<n.length?" "+n.join(" "):""}})}}])}();s.fields.textarea=x;k=function(){function r(e,t,n){a(this,r),t=$.extend(!0,{type:"wysiwyg",label:null,labelWidth:null,width:null,minWidth:null,maxWidth:null,height:null,minHeight:null,maxHeight:null,options:{},outContent:null,description:null,required:null,readonly:!1,show:!0,positions:null,noSend:null},t),i=this,t=[e,t,n],n=d(n=r),c(n=f(i,function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}}}()?Reflect.construct(n,t||[],d(i).constructor):n.apply(i,t)),"_editor",null),c(n,"_editorHash",null),n._editorHash=g.hashCode();var i,o=n;return e.on("show",function(){o._options.readonly||o._initEvents()}),n}return t(r,u),e(r,[{key:"readonly",value:function(e){l(d(r.prototype),"readonly",this).call(this,e),e||this._initEvents()}},{key:"getValue",value:function(){return!this._options.readonly&&this._editor?this._editor.getContent():this._value}},{key:"setValue",value:function(e){this._value=e,this._options.readonly?$(".content-"+this._hash).text(e):this._editor&&this._editor.setContent(e)}},{key:"validate",value:function(e,t){var n;this._options.readonly||((n=$(".content-"+this._hash)).find(".text-success").remove(),n.find(".text-danger").remove(),null!==e&&(e?"string"==typeof(t=void 0===t&&"string"==typeof this._options.validText?this._options.validText:t)&&n.append('<div class="ps-2 text-success">'+t+"</div>"):(void 0===t&&("string"==typeof this._options.invalidText?t=this._options.invalidText:!t&&this._options.required&&(t=this._form.getLang().required_field)),"string"==typeof t&&n.append('<div class="ps-2 text-danger">'+t+"</div>"))))}},{key:"isValid",value:function(){return!(this._options.required&&!this._options.readonly&&!this.getValue())}},{key:"renderContent",value:function(){var e=this.getOptions();return ejs.render(p["fields/wysiwyg.html"],{field:e,value:null!==this._value?this._value:"",editorHash:this._editorHash})}},{key:"_initEvents",value:function(){var e,t,n;this._options.readonly||(n={},t="editor-"+(e=this)._editorHash,(n="object"===h(this._options.options)&&!Array.isArray(this._options.options)&&0<Object.keys(this._options.options).length?this._options.options:"simple"===this._options.options?{plugins:"image lists anchor charmap",toolbar:"blocks | bold italic underline | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | forecolor backcolor removeformat",menubar:!1,branding:!1}:{promotion:!1,branding:!1,plugins:"preview importcss searchreplace autolink autosave save directionality code visualblocks visualchars fullscreen image link media template codesample table charmap pagebreak nonbreaking anchor insertdatetime advlist lists wordcount help charmap quickbars emoticons",menubar:"file edit view insert format tools table help",toolbar:"undo redo | bold italic underline strikethrough | fontfamily fontsize blocks | alignleft aligncenter alignright alignjustify | outdent indent | numlist bullist | forecolor backcolor removeformat | pagebreak | charmap emoticons | fullscreen preview save print | insertfile image media template link anchor codesample | ltr rtl"}).selector="#editor-"+this._editorHash,0<=["string","number"].indexOf(h(this._options.width))&&(n.width=this._options.width),0<=["string","number"].indexOf(h(this._options.minWidth))&&(n.min_width=this._options.minWidth),0<=["string","number"].indexOf(h(this._options.maxWidth))&&(n.max_width=this._options.maxWidth),0<=["string","number"].indexOf(h(this._options.height))&&(n.height=this._options.height),0<=["string","number"].indexOf(h(this._options.minHeight))&&(n.min_height=this._options.minHeight),0<=["string","number"].indexOf(h(this._options.maxHeight))&&(n.max_height=this._options.maxHeight),tinymce.init(n).then(function(){e._editor=tinymce.get(t)}))}}])}();s.fields.wysiwyg=k;b=function(){function r(e,t,n){a(this,r),t=$.extend(!0,{type:"password_repeat",name:null,label:null,labelWidth:null,width:null,outContent:null,description:null,errorText:null,fields:null,attr:{type:"password",class:"form-control d-inline-block flex-shrink-0"},required:null,invalidText:null,validText:null,readonly:null,show:!0,showBtn:!0,position:null,noSend:null},t),i=this,t=[e,t,n],n=d(n=r),c(n=f(i,function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}}}()?Reflect.construct(n,t||[],d(i).constructor):n.apply(i,t)),"_isChangeState",!0);var i,o=n;return e.on("show",function(){o._initEvents()}),n}return t(r,u),e(r,[{key:"readonly",value:function(e){l(d(r.prototype),"readonly",this).call(this,e),e||this._initEvents()}},{key:"getValue",value:function(){var e;return this._options.readonly?this._value:void 0!==(e=$(".content-"+this._hash+' input[type="password"]').eq(0)).attr("disabled")&&!1!==e.attr("disabled")?null:e.val()}},{key:"setValue",value:function(e){["string","number"].indexOf(h(e))<0||(this._value=e,this._options.readonly?$(".content-"+this._hash).text(e?"******":""):$(".content-"+this._hash+' input[type="password"]').val(e))}},{key:"validate",value:function(e,t){var n,i;this._options.readonly||(n=$(".content-"+this._hash),i=$('input[type="password"]',n),n.find(".valid-feedback").remove(),n.find(".invalid-feedback").remove(),null===e?(i.removeClass("is-invalid"),i.removeClass("is-valid")):e?(i.removeClass("is-invalid"),i.addClass("is-valid"),"string"==typeof(t=void 0===t&&"string"==typeof this._options.validText?this._options.validText:t)&&n.append('<div class="valid-feedback d-block">'+t+"</div>")):(i.removeClass("is-valid"),i.addClass("is-invalid"),void 0===t&&("string"==typeof this._options.invalidText?t=this._options.invalidText:!t&&this._options.required&&(t=this._form.getLang().required_field)),"string"==typeof t&&n.append('<div class="invalid-feedback d-block">'+t+"</div>")))}},{key:"isValid",value:function(){var e;return!(this._isChangeState&&!this._options.readonly)||(e=$(".content-"+this._hash+' input[type="password"]')).eq(0).val()===e.eq(1).val()&&(e[0]?e.eq(0).is(":valid"):null)}},{key:"renderContent",value:function(){return this._options.readonly?this._renderContentReadonly():this._renderContent()}},{key:"_renderContent",value:function(){var n=[],i=[],e=this.getOptions(),t=(this._isChangeState=!e.showBtn||!this._value,e.hasOwnProperty("attr")&&"object"===h(e.attr)&&null!==e.attr&&!Array.isArray(e.attr)||(e.attr={}),this._isChangeState||(e.attr.disabled=""),e.name&&(e.attr.name=this._options.name),e.attr.value=this._value?"******":"",e.width&&(e.attr=g.mergeAttr({style:"width:"+e.width},e.attr)),e.required&&(e.attr.required="required"),$.each(e.attr,function(e,t){n.push(e+'="'+t+'"')}),$.each(e.attr,function(e,t){["name","value"].indexOf(e)<0&&i.push(e+'="'+t+'"')}),this._form.getLang());return ejs.render(p["fields/passwordRepeat.html"],{field:e,value:null!==this._value?this._value:"",lang:t,btn_text:this._isChangeState?t.cancel:t.change,render:{attr:0<n.length?" "+n.join(" "):"",attr2:0<i.length?" "+i.join(" "):""}})}},{key:"_renderContentReadonly",value:function(){var e=this.getOptions();return ejs.render(p["fields/passwordRepeat.html"],{field:e,value:this._value?"******":"",hash:this._hash})}},{key:"_initEvents",value:function(){var i=this,o=i._options.noSend;$(".content-"+this._hash+" .btn-password-change").click(function(e){var t=$(this).data("change"),n=$(this).data("cancel");i._isChangeState?($(".content-"+i._hash+' [type="password"]').attr("disabled","disabled"),$(this).text(t),i._isChangeState=!1,i._options.noSend=!0):($(".content-"+i._hash+' [type="password"]').removeAttr("disabled"),$(this).text(n),i._isChangeState=!0,i._options.noSend=o)})}}])}();s.fields.passwordRepeat=b;x=function(){function o(e,t,n){return a(this,o),t=$.extend(!0,{type:"file",name:null,label:null,labelWidth:null,width:null,outContent:null,description:null,errorText:null,field:null,attr:{class:"form-control d-inline-block"},required:null,invalidText:null,validText:null,readonly:null,show:!0,position:null,noSend:null},t),i=this,e=[e,t,n],t=d(t=o),f(i,function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}}}()?Reflect.construct(t,e||[],d(i).constructor):t.apply(i,e));var i}return t(o,u),e(o,[{key:"getValue",value:function(){return this._options.readonly?this._value:$(".content-"+this._hash+" input")[0].files}},{key:"setValue",value:function(n){var i;(n instanceof File||n instanceof FileList)&&(this._value=n,this._options.readonly?$(".content-"+this._hash).text(""):(i=new DataTransfer,n instanceof File?i.items.add(n):$.each(n,function(e,t){n instanceof File&&i.items.add(t)}),$(".content-"+this._hash+" input")[0].files=i.files))}},{key:"validate",value:function(e,t){var n,i;this._options.readonly||(n=$(".content-"+this._hash),i=$("input",n),n.find(".valid-feedback").remove(),n.find(".invalid-feedback").remove(),null===e?(i.removeClass("is-invalid"),i.removeClass("is-valid")):e?(i.removeClass("is-invalid"),i.addClass("is-valid"),"string"==typeof(t=void 0===t&&"string"==typeof this._options.validText?this._options.validText:t)&&n.append('<div class="valid-feedback">'+t+"</div>")):(i.removeClass("is-valid"),i.addClass("is-invalid"),void 0===t&&("string"==typeof this._options.invalidText?t=this._options.invalidText:!t&&this._options.required&&(t=this._form.getLang().required_field)),"string"==typeof t&&n.append('<div class="invalid-feedback">'+t+"</div>")))}},{key:"isValid",value:function(){var e=$(".content-"+this._hash+" input");return e[0]?e.is(":valid"):null}},{key:"renderContent",value:function(){return this._options.readonly?this._renderContentReadonly():this._renderContent()}},{key:"_renderContent",value:function(){var n=[],e=this.getOptions();return e.hasOwnProperty("attr")&&"object"===h(e.attr)&&null!==e.attr&&!Array.isArray(e.attr)||(e.attr={}),e.name&&(e.attr.name=this._options.name),e.attr.type=e.type,e.attr.value=null!==this._value?this._value:"",e.width&&(e.attr=g.mergeAttr({style:"width:"+e.width},e.attr)),e.required&&(e.attr.required="required"),$.each(e.attr,function(e,t){n.push(e+'="'+t+'"')}),ejs.render(p["fields/input.html"],{field:e,datalistId:"",value:null!==this._value?this._value:"",render:{attr:0<n.length?" "+n.join(" "):"",datalist:[]}})}},{key:"_renderContentReadonly",value:function(){var e=this.getOptions(),t="text",n=this._value,i=this._form.getLang();e.hasOwnProperty("type")&&"string"==typeof e.type&&(t=e.type);try{switch(t){case"date":n=g.formatDate(n);break;case"datetime-local":n=g.formatDateTime(n);break;case"month":n=g.formatDateMonth(n,i);break;case"week":n=g.formatDateWeek(n,i)}}catch(e){console.error(e)}return ejs.render(p["fields/input.html"],{field:e,value:n,hash:this._hash})}}])}();s.fields.file=x;let O={isObject:function(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e},isNumeric:function(e){return("number"==typeof e||"string"==typeof e&&""!==e.trim())&&!isNaN(e)},getFileSize:function(e){return e instanceof File?e.size||e.fileSize:null},getFileName:function(e){return e instanceof File?e.name||e.fileName:null},getSizeHuman:function(e){if(!O.isNumeric(e))return"";let t="";return 1073741824<=(e=Number(e))?t=(e/1073741824).toFixed(2)+" Gb":1048576<=e?t=(e/1048576).toFixed(2)+" Mb":1024<=e?t=(e/1024).toFixed(2)+" Kb":0<=e&&(t=e+" bytes"),t},hashCode:function(){return this.crc32(((new Date).getTime()+Math.random()).toString()).toString(16)},crc32:function(e){for(var t=[],n=0;n<256;n++){for(var i=n,o=0;o<8;o++)i=1&i?3988292384^i>>>1:i>>>1;t[n]=i}for(var r=-1,s=0;s<e.length;s++)r=r>>>8^t[255&(r^e.charCodeAt(s))];return(-1^r)>>>0}},C={onLoadStart:function(e){e=e.getElement();e&&(e.find(".fileup-upload").hide(),e.find(".fileup-abort").show(),e.find(".fileup-result").removeClass("fileup-error").removeClass("fileup-success").text(""))},onLoadProgress:function(e,t){t.lengthComputable&&(t=Math.ceil(t.loaded/t.total*100),e=e.getElement())&&e.find(".fileup-progress-bar").css("width",t+"%")},onLoadAbort:function(e){e=e.getElement();e&&(e.find(".fileup-abort").hide(),e.find(".fileup-upload").show(),e.find(".fileup-result").removeClass("fileup-error").removeClass("fileup-success").text(""))},onSuccess:function(e){var t,e=e.getElement();e&&(t=this.getLang(),e.find(".fileup-abort").hide(),e.find(".fileup-upload").hide(),e.find(".fileup-result").removeClass("fileup-error").addClass("fileup-success").text(t.complete))},onError:function(t,n){var i=this.getLang();switch(t){case"files_limit":alert(i.errorFilesLimit.replace(/%filesLimit%/g,n.filesLimit));break;case"size_limit":var o=O.getSizeHuman(n.sizeLimit);let e=i.errorSizeLimit;e=(e=e.replace(/%sizeLimit%/g,o)).replace(/%fileName%/g,O.getFileName(n.fileData)),alert(e);break;case"file_type":alert(i.errorFileType.replace(/%fileName%/g,O.getFileName(n.fileData)));break;case"load_bad_status":case"load_error":case"load_timeout":var r,o=n.file.getElement();o&&(r="load_bad_status"===t?i.errorBadStatus:i.errorLoad,o.find(".fileup-abort").hide(),o.find(".fileup-upload").show(),o.find(".fileup-result").addClass("fileup-error").text(r));break;case"old_browser":alert(i.errorOldBrowser)}},onDragOver:function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy";e=this.getDropzone();e&&e.addClass("over")},onDragLeave:function(e){var t=this.getDropzone();t&&t.removeClass("over")},onDragEnd:function(e){var t=this.getDropzone();t&&t.removeClass("over")},onDragEnter:function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}},j={initInput:function(e){let t=null;if(e._options.input instanceof HTMLElement||e._options.input instanceof jQuery?t=$(e._options.input):"string"==typeof e._options.input&&e._options.input&&(t=$("#"+e._options.input)),!t||!$(t)[0]||"file"!==$(t)[0].type)throw new Error("Not found input element");e._input=t},initQueue:function(e){let t=null;if(e._options.queue instanceof HTMLElement||e._options.queue instanceof jQuery?t=$(e._options.queue):"string"==typeof e._options.queue&&e._options.queue&&(t=$("#"+e._options.queue)),!t||!$(t)[0])throw new Error("Not found queue element");e._queue=t},initDropzone:function(n){let e=null;if(n._options.dropzone instanceof HTMLElement||n._options.dropzone instanceof jQuery?e=$(n._options.dropzone):"string"==typeof n._options.dropzone&&n._options.dropzone&&(e=$("#"+n._options.dropzone)),e){n._dropzone=e;let t=this;e.on("click",function(){n.getInput().click()}),e[0].addEventListener("dragover",function(e){t.trigger(n,"drag_over",[e])}),e[0].addEventListener("dragleave",function(e){t.trigger(n,"drag_leave",[e])}),e[0].addEventListener("dragenter",function(e){t.trigger(n,"drag_enter",[e])}),e[0].addEventListener("dragend",function(e){t.trigger(n,"drag_end",[e])}),e[0].addEventListener("drop",function(e){n.getInput()[0].files=e.target.files||e.dataTransfer.files,t.appendFiles(n,e)})}},initEvents:function(i){function e(e,t){let n=null;"function"==typeof t?n=t:"string"==typeof t&&(n=new Function(t)),n&&i.on(e,n)}var t=i.getOptions();let n=this;e("load_start",C.onLoadStart),e("load_progress",C.onLoadProgress),e("load_abort",C.onLoadAbort),e("load_success",C.onSuccess),e("error",C.onError),e("drag_over",C.onDragOver),e("drag_leave",C.onDragEnter),e("drag_end",C.onDragLeave),e("drag_enter",C.onDragEnd),t.onSelect&&e("select",t.onSelect),t.onRemove&&e("remove",t.onRemove),t.onBeforeStart&&e("load_before_start",t.onBeforeStart),t.onStart&&e("load_start",t.onStart),t.onProgress&&e("load_progress",t.onProgress),t.onAbort&&e("load_abort",t.onAbort),t.onSuccess&&e("load_success",t.onSuccess),t.onFinish&&e("load_finish",t.onFinish),t.onError&&e("error",t.onError),t.onDragOver&&e("drag_over",t.onDragOver),t.onDragLeave&&e("drag_leave",t.onDragLeave),t.onDragEnd&&e("drag_end",t.onDragEnd),t.onDragEnter&&e("drag_enter",t.onDragEnter),i.getInput().on("change",function(e){n.appendFiles(i,e)})},renderFiles:function(e){var t=e.getOptions();if(Array.isArray(t.files)&&0<t.files.length)for(var n=0;n<t.files.length;n++)O.isObject(t.files[n])&&e.appendFileByData(t.files[n])},trigger:function(e,t,n){n=n||[];var i=[];if(e._events[t]instanceof Object&&0<e._events[t].length)for(var o=0;o<e._events[t].length;o++){var r=e._events[t][o].callback;i.push(r.apply(e._events[t][o].context||e,n)),e._events[t][o].singleExec&&(e._events[t].splice(o,1),o--)}return i},appendFiles:function(t,e){e.preventDefault(),e.stopPropagation();var n=t.getOptions(),i=t.getInput(),o=i[0].files,r=i.is("[multiple]");if(0<o.length){for(var s=0;s<o.length;s++){var a=o[s];if(0<n.sizeLimit&&O.getFileSize(a)>n.sizeLimit)this.trigger(t,"error",["size_limit",{fileData:a,sizeLimit:n.sizeLimit}]);else{if(0<n.filesLimit&&Object.keys(t._files).length>=n.filesLimit){this.trigger(t,"error",["files_limit",{fileData:a,filesLimit:n.filesLimit}]);break}if("string"==typeof i[0].accept){var l=i[0].accept;if(l&&/[^\w]+/.test(l)){let e=!1;var u=l.split(",");if(0<u.length)for(var c=0;c<u.length;c++)if(u[c]=u[c].replace(/\s/g,""),new RegExp(u[c].replace("*",".*")).test(a.type)||new RegExp(u[c].replace(".",".*/")).test(a.type)){e=!0;break}if(!e){this.trigger(t,"error",["file_type",{fileData:a}]);continue}}}l=this.trigger(t,"select",[a]);if(l){let n=!1;if($.each(l,function(e,t){if(!1===t)return!(n=!0)}),n)continue}if(r||t.removeAll(),t.appendFile(a),!r)break}}i.val("")}this.trigger(t,"dragEnd",[e])}},A={_options:{name:null,size:null,urlPreview:null,urlDownload:null},_id:"",_status:"stand_by",_fileElement:null,_file:null,_fileUp:null,_xhr:null,_init:function(n,e,t,i){if(!O.isObject(t))throw new Error("File incorrect options param");if("number"!=typeof e||e<0)throw new Error("File dont set or incorrect id param");if("string"!=typeof t.name||!t.name)throw new Error("File dont set name param");if(this._fileUp=n,this._options=$.extend(!0,{},this._options,t),this._id=e,i instanceof File){let t=null;if(window.XMLHttpRequest)t=new("onload"in new XMLHttpRequest?XMLHttpRequest:XDomainRequest);else if(window.ActiveXObject)try{t=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{t=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){j.trigger(n,"error",["old_browser",{file:this}])}}else j.trigger(n,"error",["old_browser",{file:this}]);if(!t)throw new Error("xhr dont created. Check your browser");this._xhr=t,this._file=i}else this._status="finish"},getId:function(){return this._id},getName:function(){return this._file?O.getFileName(this._file):this._options.name},getElement:function(){return this._fileElement},getUrlPreview:function(){return this._options.urlPreview},getUrlDownload:function(){return this._options.urlDownload},getSize:function(){return this._file?O.getFileSize(this._file):this._options.size},getSizeHuman:function(){var e=this.getSize();return O.getSizeHuman(e)},getXhr:function(){return this._xhr},getFile:function(){return this._file instanceof File?this._file:null},getStatus:function(){return this._status},setStatus:function(e){"string"==typeof e&&(this._status=e)},getOptions:function(){return this._options},getOption:function(e){return"string"==typeof e&&this._options.hasOwnProperty(e)?this._options[e]:null},setOption:function(e,t){"string"==typeof e&&(this._options[e]=t)},showError:function(e){var t;"string"==typeof e&&(t=this.getElement())&&t.find(".fileup-result").removeClass("fileup-success").addClass("fileup-error").text(e)},showSuccess:function(e){var t;"string"==typeof e&&(t=this.getElement())&&t.find(".fileup-result").removeClass("fileup-error").addClass("fileup-success").text(e)},remove:function(){this.abort(),this._fileElement&&this._fileElement.fadeOut("fast",function(){this.remove()});var e=this.getId();this._fileUp._files.hasOwnProperty(e)&&delete this._fileUp._files[e],j.trigger(this._fileUp,"remove",[this])},upload:function(){let t=this.getFile(),e=this.getXhr();if(!t||!e)return!1;var i=this._fileUp.getOptions();let n=this;if("number"==typeof i.timeout&&(e.timeout=i.timeout),e.onloadstart=function(){n.setStatus("load_start"),j.trigger(n._fileUp,"load_start",[n])},e.upload.onprogress=function(e){j.trigger(n._fileUp,"load_progress",[n,e])},e.onload=function(){n.setStatus("loaded"),200===e.status?j.trigger(n._fileUp,"load_success",[n,e.responseText]):j.trigger(n._fileUp,"error",["load_bad_status",{file:n,fileData:t,response:e.responseText,xhr:e}])},e.onloadend=function(){n.setStatus("finish"),j.trigger(n._fileUp,"load_finish",[n])},e.onabort=function(){n.setStatus("stand_by"),j.trigger(n._fileUp,"load_abort",[n])},e.ontimeout=function(){n.setStatus("stand_by"),j.trigger(n._fileUp,"error",["load_timeout",{file:n,fileData:t}])},e.onerror=function(e){n.setStatus("stand_by"),j.trigger(n._fileUp,"error",["load_error",{file:n,fileData:t,event:e}])},e.open(i.httpMethod||"post",i.url,!0),e.setRequestHeader("Cache-Control","no-cache"),e.setRequestHeader("X-Requested-With","XMLHttpRequest"),j.trigger(n._fileUp,"load_before_start",[n,e]),void 0===window.FormData)return e.send(t);{let n=new FormData;return n.append(i.fieldName,t),Object.keys(i.extraFields).length&&$.each(i.extraFields,function(e,t){n.append(e,t)}),e.send(n)}},abort:function(){this._xhr&&this._xhr.abort()},render:function(e){if(!e||"string"!=typeof e)return null;var t=this._fileUp.getLang(),n=this._fileUp.getOptions();let i=this,o=!1;var r=O.isObject(n.mimeTypes)?n.mimeTypes:{},s="string"==typeof n.iconDefault?n.iconDefault:"",n="boolean"!=typeof n.showRemove||n.showRemove,a=this.getSizeHuman();let l=null,u=null,c=null;return e=(e=(e=(e=(e=e.replace(/\[NAME\]/g,this.getName())).replace(/\[SIZE\]/g,a)).replace(/\[UPLOAD\]/g,t.upload)).replace(/\[REMOVE\]/g,t.remove)).replace(/\[ABORT\]/g,t.abort),this._file&&this._file instanceof File?this._file.type&&"string"==typeof this._file.type&&this._file.type.match(/^image\/.*/)?("undefined"!=typeof FileReader&&((t=new FileReader).onload=function(e){i._fileElement&&i._fileElement.find(".fileup-preview").removeClass("no-preview").find("img").attr("src",e.target.result)},t.readAsDataURL(this._file)),o=!0,e=(e=e.replace(/\[PREVIEW_SRC\]/g,"")).replace(/\[TYPE\]/g,"fileup-image fileup-no-preview")):(e=(e=e.replace(/\[PREVIEW_SRC\]/g,"")).replace(/\[TYPE\]/g,"fileup-doc"),u=this._file.type,c=this.getName().split(".").pop()):(t=this.getUrlPreview(),e=(e=e.replace(/\[PREVIEW_SRC\]/g,t||"")).replace(/\[TYPE\]/g,t?"fileup-image":"fileup-doc"),c=this.getName()?this.getName().split(".").pop().toLowerCase():""),this._fileElement=$(e),o&&this._fileElement.find(".fileup-preview").addClass("no-preview"),a||this._fileElement.find(".fileup-size").hide(),(u||c)&&$.each(r,function(e,n){if(O.isObject(n)&&n.hasOwnProperty("icon")&&"string"==typeof n.icon&&""!==n.icon){if(u&&n.hasOwnProperty("mime"))if("string"==typeof n.mime){if(n.mime===u)return l=n.icon,!1}else if(Array.isArray(n.mime)){if($.each(n.mime,function(e,t){if("string"==typeof t&&t===u)return l=n.icon,!1}),l)return!1}else if(n.mime instanceof RegExp&&n.mime.test(u))return l=n.icon,!1;return!(c&&n.hasOwnProperty("ext")&&Array.isArray(n.ext)&&($.each(n.ext,function(e,t){if("string"==typeof t&&t===c)return l=n.icon,!1}),l))&&void 0}}),l=l||s,this._fileElement.find(".fileup-icon").addClass(l),n||this._fileElement.find(".fileup-remove").hide(),this.getUrlDownload()&&(t=this._fileElement.find(".fileup-name"))[0]&&t.replaceWith('<a href="'+this.getUrlDownload()+'" class="fileup-name" download="'+this.getName()+'">'+this.getName()+"</a>"),"finish"===this._status?(this._fileElement.find(".fileup-upload").hide(),this._fileElement.find(".fileup-abort").hide(),this._fileElement.find(".fileup-progress").hide()):(this._fileElement.find(".fileup-upload").click(function(){i.upload()}),this._fileElement.find(".fileup-abort").click(function(){i.abort()})),this._fileElement.find(".fileup-remove").click(function(){i.remove()}),this._fileElement}},P=Object.create(null),E={_options:{id:null,url:null,input:null,queue:null,dropzone:null,files:[],fieldName:"file",extraFields:{},lang:"en",langItems:null,sizeLimit:0,filesLimit:0,httpMethod:"post",timeout:null,autostart:!(P["file.html"]='<div class="fileup-file [TYPE] mb-2 p-1 d-flex flex-nowrap gap-2 bg-light border border-secondary-subtle rounded rounded-1"> <div class="fileup-preview"> <img src="[PREVIEW_SRC]" alt="[NAME]" class="border rounded"/> <i class="fileup-icon fs-4 text-secondary"></i> </div> <div class="flex-fill"> <div class="fileup-description"> <span class="fileup-name">[NAME]</span> <small class="fileup-size text-nowrap text-secondary">([SIZE])</small> </div> <div class="fileup-controls mt-1 d-flex gap-2"> <span class="fileup-remove" title="[REMOVE]">✕</span> <span class="fileup-upload link-primary">[UPLOAD]</span> <span class="fileup-abort link-primary" style="display:none">[ABORT]</span> </div> <div class="fileup-result"></div> <div class="fileup-progress progress mt-2 mb-1"> <div class="fileup-progress-bar progress-bar"></div> </div> </div> </div>'),showRemove:!0,templateFile:null,onSelect:null,onRemove:null,onBeforeStart:null,onStart:null,onProgress:null,onAbort:null,onSuccess:null,onFinish:null,onError:null,onDragOver:null,onDragLeave:null,onDragEnd:null,onDragEnter:null,iconDefault:"bi bi-file-earmark-text",mimeTypes:{archive:{mime:["application/zip","application/gzip","application/x-bzip","application/x-bzip2","application/x-7z-compressed"],ext:["zip","7z","bz","bz2","gz","jar","rar","tar"],icon:"bi bi-file-earmark-zip"},word:{mime:["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],ext:["doc","docx"],icon:"bi bi-file-earmark-word"},excel:{mime:["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],ext:["xls","xlsx"],icon:"bi bi-file-earmark-excel"},image:{mime:/image\/.*/,ext:["jpg","jpeg","png","bmp","gif","raw","webp","heic","ico"],icon:"bi bi-file-earmark-image"},video:{mime:/video\/.*/,ext:["avi","mp4","mpeg","ogv","ts","webm","3gp","3g2","mkv"],icon:"bi bi-file-earmark-play"},audio:{mime:/audio\/.*/,ext:["avi","mp4","mpeg","ogv","ts","webm","3gp","3g2","mkv"],icon:"bi bi-file-earmark-music"},pdf:{mime:["application/pdf"],ext:["pdf"],icon:"bi bi-file-earmark-pdf"},binary:{mime:["application/octet-stream"],ext:["bin","exe","dat","dll"],icon:"bi bi-file-earmark-binary"}}},_id:null,_fileUp:null,_fileIndex:0,_input:null,_queue:null,_dropzone:null,_files:{},_events:{},_init:function(e,t){if("string"!=typeof t.url||!t.url)throw new Error("Dont set url param");this._fileUp=e,this._options=$.extend(!0,{},this._options,t),this._id="string"==typeof this._options.id&&this._options.id?this._options.id:O.hashCode(),this._options.templateFile&&"string"==typeof this._options.templateFile||(this._options.templateFile=P["file.html"]),j.initInput(this),j.initQueue(this),j.initDropzone(this),j.initEvents(this),j.renderFiles(this)},destruct:function(){var e=this.getId();this._fileUp._instances.hasOwnProperty(e)&&delete this._fileUp._instances[e]},getOptions:function(){return this._options},getId:function(){return this._id},getInput:function(){return this._input},getQueue:function(){return this._queue},getDropzone:function(){return this._dropzone},on:function(e,t,n){"object"!=typeof this._events[e]&&(this._events[e]=[]),this._events[e].push({context:n||this,callback:t,singleExec:!1})},one:function(e,t,n){"object"!=typeof this._events[e]&&(this._events[e]=[]),this._events[e].push({context:n||this,callback:t,singleExec:!0})},getLang:function(){return $.extend(!0,{},this._options.langItems)},getFiles:function(){return this._files},getFileById:function(n){let i=null;return $.each(this._files,function(e,t){n===t.getId()&&(i=t)}),i},removeAll:function(){$.each(this._files,function(e,t){t.remove()})},uploadAll:function(){$.each(this._files,function(e,t){t.upload()})},abortAll:function(){$.each(this._files,function(e,t){t.abort()})},appendFile:function(e){var t,n;return e instanceof File&&(t=$.extend(!0,{},A),n={name:O.getFileName(e),size:O.getFileSize(e),type:e.type},t._init(this,this._fileIndex,n,e),this._files[this._fileIndex]=t,(n=this.getQueue())&&n.append(t.render(this._options.templateFile)),this._fileIndex++,"boolean"==typeof this._options.autostart&&this._options.autostart&&t.upload(),!0)},appendFileByData:function(e){var t;return!!O.isObject(e)&&((t=$.extend(!0,{},A))._init(this,this._fileIndex,e),t.setStatus("finish"),this._files[this._fileIndex]=t,(e=this.getQueue())&&e.append(t.render(this._options.templateFile)),this._fileIndex++,!0)}},S={lang:{},_instances:{},create:function(e){(e=O.isObject(e)?e:{}).hasOwnProperty("lang")||(e.lang="en");var t=this.lang.hasOwnProperty(e.lang)?this.lang[e.lang]:{},t=(e.langItems=e.hasOwnProperty("langItems")&&O.isObject(e.langItems)?$.extend(!0,{},t,e.langItems):t,$.extend(!0,{},E)),e=(t._init(this,e),t.getId());return this._instances[e]=t},get:function(e){return this._instances.hasOwnProperty(e)?$.contains(document,this._instances[e]._input[0])?this._instances[e]:(delete this._instances[e],null):null}};S.lang.en={upload:"Upload",abort:"Abort",remove:"Remove",complete:"Complete",error:"Error",errorLoad:"Error uploading file",errorBadStatus:"Error uploading file. Bad request.",errorFilesLimit:"The number of selected files exceeds the limit (%filesLimit%)",errorSizeLimit:'File "%fileName%" exceeds the size limit (%sizeLimit%)',errorFileType:'File "%fileName%" is incorrect',errorOldBrowser:"Your browser can not upload files. Update to the latest version"},S.lang.ru={upload:"Загрузить",abort:"Остановить",remove:"Удалить",complete:"Готово",error:"Ошибка",errorLoad:"Ошибка при загрузке файла",errorBadStatus:"Ошибка при загрузке файла. Некорректный запрос.",errorFilesLimit:"Количество выбранных файлов превышает лимит (%filesLimit%)",errorSizeLimit:'Файл "%fileName%" превышает предельный размер (%sizeLimit%)',errorFileType:'Файл "%fileName%" является некорректным',errorOldBrowser:"Обновите ваш браузер до последней версии"},S.lang.es={upload:"Subir",abort:"Cancelar",remove:"Eliminar",complete:"Cargado",error:"Error",errorLoad:"Error al cargar el archivo",errorBadStatus:"Error al cargar el archivo. Solicitud no válida.",errorFilesLimit:"El número de archivo selecccionados excede el límite (%filesLimit%)",errorSizeLimit:'El archivo "%fileName%" excede el limite de tamaño (%sizeLimit%)',errorFileType:'El archivo "%fileName%" es inválido',errorOldBrowser:"Tu navegador no puede subir archivos. Actualiza a la última versión"},S.lang.pt={upload:"Enviar",abort:"Cancelar",remove:"Remover",complete:"Enviado",error:"Erro",errorLoad:"Erro ao carregar o arquivo",errorBadStatus:"Erro ao carregar o arquivo. Pedido inválido.",errorFilesLimit:"O número de arquivos selecionados excede o limite (%filesLimit%)",errorSizeLimit:'Arquivo "%fileName%" excede o limite (%sizeLimit%)',errorFileType:'Arquivo "%fileName%" inválido',errorOldBrowser:"Seu navegador não pode enviar os arquivos. Atualize para a versão mais recente"};k=function(){function r(e,t,n){a(this,r),t=$.extend(!0,{type:"fileUpload",name:null,label:null,labelWidth:null,width:null,outContent:null,description:null,errorText:null,fields:null,required:null,invalidText:null,validText:null,readonly:null,show:!0,position:null,noSend:null,options:{url:"",httpMethod:"post",fieldName:"file",showButton:!0,showDropzone:!1,autostart:!0,extraFields:!0,accept:null,timeout:null,filesLimit:null,sizeLimit:null,templateFile:null}},t),i=this,t=[e,t,n],n=d(n=r),c(n=f(i,function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}}}()?Reflect.construct(n,t||[],d(i).constructor):n.apply(i,t)),"_fileUp",null);var i,o=n;return e.on("show",function(){o._initEvents()}),n}return t(r,u),e(r,[{key:"readonly",value:function(e){this._value=this._getFiles(),this._options.readonly=!!e,this._fileUp&&this._fileUp.destruct(),$(".content-"+this._hash).html(this.renderContent()),this._initEvents()}},{key:"getValue",value:function(){var e=this._getFiles();return $.each(e,function(e,t){t.hasOwnProperty("urlPreview")&&delete t.urlPreview,t.hasOwnProperty("urlDownload")&&delete t.urlDownload}),e}},{key:"setValue",value:function(e){var n;Array.isArray(e)&&((n=this)._fileUp.removeAll(),$.each(e,function(e,t){t instanceof File?n._fileUp.appendFile(t):g.isObject(t)&&n._fileUp.appendFileByData(t)}))}},{key:"validate",value:function(e,t){var n;this._options.readonly||((n=$(".content-"+this._hash)).find("> .validate-content").remove(),e?"string"==typeof(t=void 0===t&&"string"==typeof this._options.validText?this._options.validText:t)&&n.append('<div class="validate-content text-success">'+t+"</div>"):!1===e&&(void 0===t&&("string"==typeof this._options.invalidText?t=this._options.invalidText:!t&&this._options.required&&(t=this._form.getLang().required_field)),"string"==typeof t)&&n.append('<div class="validate-content text-danger">'+t+"</div>"))}},{key:"isValid",value:function(){return this._options.required&&this._fileUp?0<this._getFiles().length:null}},{key:"getFileUp",value:function(){return this._fileUp}},{key:"renderContent",value:function(){return this._options.readonly?this._renderContentReadonly():this._renderContent()}},{key:"_renderContent",value:function(){var e=this._form.getLang(),t=g.isObject(this._options.options)?this._options.options:{},n=!(g.isNumeric(t.filesLimit)&&1===Number(t.filesLimit)),i="string"==typeof t.accept&&t.accept?t.accept:null;return ejs.render(p["fields/file-upload.html"],{id:this._hash,showButton:!!t.showButton,showDropzone:!!t.showDropzone,isMultiple:n,accept:i,lang:e})}},{key:"_renderContentReadonly",value:function(){var e=this._form.getLang(),t=g.isObject(this._options.options)?this._options.options:{},n=!(g.isNumeric(t.filesLimit)&&1===Number(t.filesLimit)),t="string"==typeof t.accept&&t.accept?t.accept:null;return ejs.render(p["fields/file-upload.html"],{id:this._hash,showButton:!1,showDropzone:!1,isMultiple:n,accept:t,lang:e})}},{key:"_initEvents",value:function(){var e=g.isObject(this._options.options)?this._options.options:{},t=this._form.getOptions(),n=$("#fileup-"+this._hash+"-queue"),i={url:"string"==typeof e.url?e.url:"",input:"fileup-"+this._hash,queue:n};t.showDropzone&&(i.dropzone="fileup-"+this._hash+"-dropzone"),"string"==typeof t.lang&&(i.lang=t.lang),"string"==typeof e.fieldName&&(i.fieldName=e.fieldName),"string"==typeof e.httpMethod&&(i.httpMethod=e.httpMethod),g.isObject(e.extraFields)&&(i.extraFields=e.extraFields),g.isNumeric(e.sizeLimit)&&(i.sizeLimit=e.sizeLimit),g.isNumeric(e.filesLimit)&&(i.filesLimit=e.filesLimit),g.isNumeric(e.timeout)&&(i.timeout=e.timeout),"boolean"==typeof e.autostart&&(i.autostart=e.autostart),"string"==typeof e.templateFile&&(i.templateFile=e.templateFile),this._options.readonly&&(i.showRemove=!1),Array.isArray(this._value)&&(i.files=this._value),this._fileUp=S.create(i),Array.isArray(this._value)&&0<this._value.length&&n.addClass("mt-2"),this._fileUp.on("select",function(e){n.addClass("mt-2")}),this._fileUp.on("remove",function(e){0===Object.keys(this.getFiles()).length&&setTimeout(function(){n.removeClass("mt-2")},150)}),this._fileUp.on("load_success",function(t,e){var n=null;if(e)try{n=JSON.parse(e)}catch(e){t.showError("Incorrect response JSON format")}n&&t.setOption("upload",n)})}},{key:"_getFiles",value:function(){var e,o;return this._fileUp?(e=this._fileUp.getFiles(),o=[],0<Object.keys(e).length&&$.each(e,function(e,t){var n=t.getFile(),i=t.getOptions();i.name=t.getName(),i.size=t.getSize(),n&&n instanceof File&&(i.type=n.type),o.push(i)}),o):[]}}])}();return s.fields.fileUpload=k,s});
//# sourceMappingURL=coreui-form.min.js.map
